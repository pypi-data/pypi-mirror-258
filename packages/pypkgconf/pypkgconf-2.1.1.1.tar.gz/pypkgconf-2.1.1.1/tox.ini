[tox]

env_list =
  py37
  py38
  py39
  py310
  py311
  py312

isolated_build = True


[testenv]

deps =
  ninja;platform_system=="Windows"
  pytest

commands = pytest {posargs:tests/}
package = external
package_env = .pkg-{envname}


[pkgenv]

deps = build
commands = python -m build --outdir={envtmpdir}{/}dist -Csetup-args="-Ddefault_library=static" -Csetup-args="-Dbuildtype=release" --wheel
