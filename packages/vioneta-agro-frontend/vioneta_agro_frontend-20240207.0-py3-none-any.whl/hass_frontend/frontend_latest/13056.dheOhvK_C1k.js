export const id=13056;export const ids=[13056,56852];export const modules={59216:(t,e,a)=>{a.d(e,{Q:()=>d,o:()=>o});var s=a(62412),l=a(53616),c=a(93408);const r=(t,e,a,c)=>{const r=a((0,s.c)(t,e),c);return r instanceof Date?(0,l.c)(r,e):r},o=(t,e,a,s,l)=>a.time_zone===c.KU.server?r(t,s.time_zone,e,l):e(t,l),d=(t,e,a,s,l)=>a.time_zone===c.KU.server?r(t,s.time_zone,e,l):e(t,l)},69832:(t,e,a)=>{a.d(e,{a:()=>s});const s=(t,e)=>{const a={};for(const s of t){const t=e(s);t in a?a[t].push(s):a[t]=[s]}return a}},21612:(t,e,a)=>{a.d(e,{CA:()=>c,MX:()=>o,O2:()=>_,OQ:()=>i,Qv:()=>h,UB:()=>d,Up:()=>s,WA:()=>r,aA:()=>u,cf:()=>n,qg:()=>l});const s=33524==a.j?["migration_error","setup_error","setup_retry"]:null,l=33524==a.j?["not_loaded","loaded","setup_error","setup_retry"]:null,c=(t,e,a)=>{const s={type:"config_entries/subscribe"};return a&&a.type&&(s.type_filter=a.type),t.connection.subscribeMessage((t=>e(t)),s)},r=(t,e)=>{const a={};return e&&(e.type&&(a.type_filter=e.type),e.domain&&(a.domain=e.domain)),t.callWS({type:"config_entries/get",...a})},o=(t,e)=>t.callWS({type:"config_entries/get_single",entry_id:e}),d=(t,e,a)=>t.callWS({type:"config_entries/update",entry_id:e,...a}),i=(t,e)=>t.callApi("DELETE",`config/config_entries/entry/${e}`),n=(t,e)=>t.callApi("POST",`config/config_entries/entry/${e}/reload`),_=(t,e)=>t.callWS({type:"config_entries/disable",entry_id:e,disabled_by:"user"}),u=(t,e)=>t.callWS({type:"config_entries/disable",entry_id:e,disabled_by:null}),h=(t,e)=>{const a=[...t],s=t=>{const a=e[t.domain];return"helper"===(null==a?void 0:a.integration_type)?-1:1};return a.sort(((t,e)=>s(e)-s(t)))}},71132:(t,e,a)=>{a.a(t,(async(t,s)=>{try{a.d(e,{C0:()=>T,CQ:()=>S,Ce:()=>V,GG:()=>B,Kc:()=>w,QB:()=>$,QZ:()=>P,SG:()=>R,SK:()=>O,au:()=>W,gT:()=>x,gZ:()=>C,im:()=>D,oP:()=>q,q0:()=>G,sn:()=>A,uV:()=>E,uY:()=>U,us:()=>z});var l=a(40569),c=a(67696),r=a(58580),o=a(54468),d=a(1168),i=a(85580),n=a(20392),_=a(91984),u=a(29880),h=a(31656),m=a(52160),y=a(59216),b=a(98611),g=a(69832),f=a(21612),p=a(32012),v=t([b]);b=(v.then?(await v)():v)[0];const k=[],$=()=>({stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),P=()=>({stat_energy_to:"",stat_compensation:null,entity_energy_price:null,number_energy_price:null}),w=()=>({type:"grid",flow_from:[],flow_to:[],cost_adjustment_day:0}),C=()=>({type:"solar",stat_energy_from:"",config_entry_solar_forecast:null}),S=()=>({type:"battery",stat_energy_from:"",stat_energy_to:""}),W=()=>({type:"gas",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),G=()=>({type:"water",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),T=t=>t.callWS({type:"energy/info"}),E=async t=>(await t.loadBackendTranslation("issues","energy"),t.callWS({type:"energy/validate"})),z=t=>t.callWS({type:"energy/get_prefs"}),x=async(t,e)=>{const a=t.callWS({type:"energy/save_prefs",...e});return F(t),a},M=async(t,e,a,s,l,c="hour")=>t.callWS({type:"energy/fossil_energy_consumption",start_time:e.toISOString(),end_time:null==l?void 0:l.toISOString(),energy_statistic_ids:a,co2_statistic_id:s,period:c}),D=t=>(0,g.a)(t.energy_sources,(t=>t.type)),q=(t,e,a)=>{const s=[];for(const l of t.energy_sources)if(!a||a.includes(l.type))if("solar"!==l.type)if("gas"!==l.type&&"water"!==l.type)if("battery"!==l.type){for(const t of l.flow_from){s.push(t.stat_energy_from),t.stat_cost&&s.push(t.stat_cost);const a=e.cost_sensors[t.stat_energy_from];a&&s.push(a)}for(const t of l.flow_to){s.push(t.stat_energy_to),t.stat_compensation&&s.push(t.stat_compensation);const a=e.cost_sensors[t.stat_energy_to];a&&s.push(a)}}else s.push(l.stat_energy_from),s.push(l.stat_energy_to);else{s.push(l.stat_energy_from),l.stat_cost&&s.push(l.stat_cost);const t=e.cost_sensors[l.stat_energy_from];t&&s.push(t)}else s.push(l.stat_energy_from);return s},K=async(t,e,a,s,_)=>{const[u,h]=await Promise.all([(0,f.WA)(t,{domain:"co2signal"}),T(t)]),m=u.length?u[0]:void 0;let b;if(m)for(const e of Object.values(t.entities)){if("co2signal"!==e.platform)continue;const a=t.states[e.entity_id];if(a&&"%"===a.attributes.unit_of_measurement){b=a.entity_id;break}}const g=[];for(const t of e.energy_sources)if("grid"===t.type)for(const e of t.flow_from)g.push(e.stat_energy_from);const v=q(e,h,["grid","solar","battery","gas"]),k=q(e,h,["water"]),$=[...v,...k],P=(0,l.c)(s||new Date,a),w=P>35?"month":P>2?"day":"hour",C=t.config.unit_system.length||"",S={energy:"kWh",volume:"km"===C?"m³":"ft³"},W={volume:"km"===C?"L":"gal"},G=v.length?(0,p.WU)(t,a,s,v,w,S,["change"]):{},E=k.length?(0,p.WU)(t,a,s,k,w,W,["change"]):{};let z,x,D,K,F,H={},U={};_&&(x=(0,y.Q)(a,c.c,t.locale,t.config)&&(0,y.Q)(s||new Date,r.c,t.locale,t.config)?(0,y.o)(a,o.c,t.locale,t.config,-(0,y.Q)(s||new Date,d.c,t.locale,t.config,a)-1):(0,y.o)(a,i.c,t.locale,t.config,-1*(P+1)),D=(0,n.c)(a,-1),v.length&&(H=(0,p.WU)(t,x,D,v,w,S,["change"])),k.length&&(U=(0,p.WU)(t,x,D,k,w,W,["change"]))),void 0!==b&&(K=M(t,a,g,b,s,P>35?"month":P>2?"day":"hour"),_&&(F=M(t,x,g,b,D,P>35?"month":P>2?"day":"hour")));const V={},Q=$.length?(0,p.kH)(t,$):[],[O,A,B,R,L,j,Y]=await Promise.all([G,E,H,U,Q,K,F]),I={...O,...A};_&&(z={...B,...R}),$.length&&L.forEach((t=>{V[t.statistic_id]=t}));return{start:a,end:s,startCompare:x,endCompare:D,info:h,prefs:e,stats:I,statsMetadata:V,statsCompare:z,co2SignalConfigEntry:m,co2SignalEntity:b,fossilEnergyConsumption:j,fossilEnergyConsumptionCompare:Y}},F=t=>{k.forEach((e=>{const a=U(t,{key:e});a.clearPrefs(),a._active&&a.refresh()}))},H=t=>{if(t._refreshTimeout&&clearTimeout(t._refreshTimeout),t._active&&(!t.end||t.end>new Date)){const e=new Date;e.getMinutes()>=20&&e.setHours(e.getHours()+1),e.setMinutes(20,0,0),t._refreshTimeout=window.setTimeout((()=>t.refresh()),e.getTime()-Date.now())}},U=(t,e={})=>{let a="_energy";if(e.key){if(!e.key.startsWith("energy_"))throw new Error("Key need to start with energy_");a=`_${e.key}`}if(t.connection[a])return t.connection[a];k.push(e.key);const s=(0,m.S)(t.connection,a,(async()=>(s.prefs||(s.prefs=await z(t)),H(s),K(t,s.prefs,s.start,s.end,s.compare)))),l=s.subscribe;s.subscribe=t=>{const e=l(t);return s._active++,void 0===s._refreshTimeout&&H(s),()=>{s._active--,s._active<1&&(clearTimeout(s._refreshTimeout),s._refreshTimeout=void 0),e()}},s._active=0,s.prefs=e.prefs;const c=new Date,r=(0,b.O)(c,t.locale,t.config).split(":")[0];s.start=(0,y.o)("0"===r?(0,i.c)(c,-1):c,_.c,t.locale,t.config),s.end=(0,y.o)("0"===r?(0,i.c)(c,-1):c,u.c,t.locale,t.config);const o=()=>{s._updatePeriodTimeout=window.setTimeout((()=>{s.start=(0,y.o)(new Date,_.c,t.locale,t.config),s.end=(0,y.o)(new Date,u.c,t.locale,t.config),o()}),(0,h.c)((0,y.o)(c,u.c,t.locale,t.config),1).getTime()-Date.now())};return o(),s.clearPrefs=()=>{s.prefs=void 0},s.setPeriod=(e,a)=>{var l;s.start=e,s.end=a,s.start.getTime()!==(0,y.o)(new Date,_.c,t.locale,t.config).getTime()||(null===(l=s.end)||void 0===l?void 0:l.getTime())!==(0,y.o)(new Date,u.c,t.locale,t.config).getTime()||s._updatePeriodTimeout?s._updatePeriodTimeout&&(clearTimeout(s._updatePeriodTimeout),s._updatePeriodTimeout=void 0):o()},s.setCompare=t=>{s.compare=t},s},V=t=>t.callWS({type:"energy/solar_forecast"}),Q=["volume","energy"],O=(t,e={},a)=>{for(const s of t.energy_sources){if("gas"!==s.type)continue;if(a&&a===s.stat_energy_from)continue;const t=e[s.stat_energy_from];if(Q.includes(null==t?void 0:t.unit_class))return t.unit_class}},A=(t,e,a={})=>{const s=O(e,a);if(void 0!==s)return"energy"===s?"kWh":"km"===t.config.unit_system.length?"m³":"ft³"},B=t=>"km"===t.config.unit_system.length?"L":"gal",R="/docs/energy/faq/#troubleshooting-missing-entities";s()}catch(t){s(t)}}))},81540:(t,e,a)=>{a.d(e,{K:()=>o});var s=a(5576),l=a(37668),c=a(54915),r=a(55736);const o=t=>(0,s.c)(null,(function(t,e){class a extends e{constructor(...e){super(...e),t(this)}}return{F:a,d:[{kind:"field",decorators:[(0,r.qq)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,l.c)((0,c.c)(a.prototype),"connectedCallback",this).call(this),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,l.c)((0,c.c)(a.prototype),"disconnectedCallback",this).call(this),this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then((t=>t())):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,l.c)((0,c.c)(a.prototype),"updated",this).call(this,t),t.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const e of t.keys())if(this.hassSubscribeRequiredHostProps.includes(e))return void this.__checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var t;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some((t=>void 0===this[t]))||(this.__unsubs=this.hassSubscribe())}}]}}),t)},13056:(t,e,a)=>{a.a(t,(async(t,s)=>{try{a.r(e),a.d(e,{HuiEnergySourcesTableCard:()=>g});var l=a(5576),c=a(26252),r=a(84244),o=a(55736),d=a(83120),i=a(25175),n=a(33060),_=a(6600),u=(a(13332),a(71132)),h=a(32012),m=a(81540),y=a(72268),b=t([u]);u=(b.then?(await b)():b)[0];let g=(0,l.c)([(0,o.Kx)("hui-energy-sources-table-card")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,o.qq)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.K2)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,o.K2)()],key:"_data",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:()=>["_config"]},{kind:"method",key:"hassSubscribe",value:function(){var t;return[(0,u.uY)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe((t=>{this._data=t}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,y.eC)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"_getColor",value:function(t,e,a,s){let l=t.getPropertyValue(e+"-"+s).trim();if(0===l.length){const t=s>0?this.hass.themes.darkMode?(0,n.a)((0,i.Yw)((0,i.LB)(a)),s):(0,n.k)((0,i.Yw)((0,i.LB)(a)),s):void 0;l=t?(0,i.MF)((0,i.KU)(t)):a}return l}},{kind:"method",key:"render",value:function(){var t,e,a,s,l,c,o,i,n;if(!this.hass||!this._config)return r.qs;if(!this._data)return r.kP`${this.hass.localize("ui.panel.lovelace.cards.energy.loading")}`;let m=0,y=0,b=0,g=0,f=0,p=0,v=0,k=0,$=!1,P=!1,w=!1,C=0,S=0,W=0,G=0,T=0,E=0,z=0,x=0;const M=(0,u.im)(this._data.prefs),D="--energy-grid-return-color",q="--energy-grid-consumption-color",K="--energy-battery-in-color",F="--energy-battery-out-color",H="--energy-solar-color",U="--energy-gas-color",V="--energy-water-color",Q=getComputedStyle(this),O=Q.getPropertyValue(H).trim(),A=Q.getPropertyValue(F).trim(),B=Q.getPropertyValue(K).trim(),R=Q.getPropertyValue(D).trim(),L=Q.getPropertyValue(q).trim(),j=Q.getPropertyValue(U).trim(),Y=Q.getPropertyValue(V).trim(),I=(null===(t=M.grid)||void 0===t?void 0:t[0].flow_from.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price)))||(null===(e=M.grid)||void 0===e?void 0:e[0].flow_to.some((t=>t.stat_compensation||t.entity_energy_price||t.number_energy_price)))||(null===(a=M.gas)||void 0===a?void 0:a.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price)))||(null===(s=M.water)||void 0===s?void 0:s.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price))),Z=(0,u.sn)(this.hass,this._data.prefs,this._data.statsMetadata)||"",X=(0,u.GG)(this.hass)||"m³",J=void 0!==this._data.statsCompare;return r.kP` <ha-card> ${this._config.title?r.kP`<h1 class="card-header">${this._config.title}</h1>`:""} <div class="mdc-data-table"> <div class="mdc-data-table__table-container"> <table class="mdc-data-table__table" aria-label="Energy sources"> <thead> <tr class="mdc-data-table__header-row"> <th class="mdc-data-table__header-cell"></th> <th class="mdc-data-table__header-cell" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.source")} </th> ${J?r.kP`<th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.previous_energy")} </th> ${I?r.kP`<th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.previous_cost")} </th>`:""}`:""} <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.energy")} </th> ${I?r.kP` <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.cost")} </th>`:""} </tr> </thead> <tbody class="mdc-data-table__content"> ${null===(l=M.solar)||void 0===l?void 0:l.map(((t,e)=>{var a;const s=(0,h.Gi)(this._data.stats[t.stat_energy_from])||0;b+=s;const l=J&&(0,h.Gi)(this._data.statsCompare[t.stat_energy_from])||0;W+=l;const c=this._getColor(Q,H,O,e);return r.kP`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,d.C)({borderColor:c,backgroundColor:c+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.aE)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${J?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(l,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(s,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell"></td>`:""} </tr>`}))} ${M.solar?r.kP`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.solar_total")} </th> ${J?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(W,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(b,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell"></td>`:""} </tr>`:""} ${null===(c=M.battery)||void 0===c?void 0:c.map(((t,e)=>{var a,s;const l=(0,h.Gi)(this._data.stats[t.stat_energy_from])||0,c=(0,h.Gi)(this._data.stats[t.stat_energy_to])||0;g+=l-c;const o=J&&(0,h.Gi)(this._data.statsCompare[t.stat_energy_from])||0,i=J&&(0,h.Gi)(this._data.statsCompare[t.stat_energy_to])||0;G+=o-i;const n=this._getColor(Q,F,A,e),u=this._getColor(Q,K,B,e);return r.kP`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,d.C)({borderColor:n,backgroundColor:n+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.aE)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${J?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(o,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(l,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell"></td>`:""} </tr> <tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,d.C)({borderColor:u,backgroundColor:u+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.aE)(this.hass,t.stat_energy_to,null===(s=this._data)||void 0===s?void 0:s.statsMetadata[t.stat_energy_to])} </th> ${J?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(-1*i,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(-1*c,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell"></td>`:""} </tr>`}))} ${M.battery?r.kP`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.battery_total")} </th> ${J?r.kP` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(G,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(g,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell"></td>`:""} </tr>`:""} ${null===(o=M.grid)||void 0===o?void 0:o.map((t=>r.kP`${t.flow_from.map(((t,e)=>{var a;const s=(0,h.Gi)(this._data.stats[t.stat_energy_from])||0;m+=s;const l=J&&(0,h.Gi)(this._data.statsCompare[t.stat_energy_from])||0;C+=l;const c=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],o=c?(0,h.Gi)(this._data.stats[c])||0:null;null!==o&&($=!0,y+=o);const i=J&&c?(0,h.Gi)(this._data.statsCompare[c])||0:null;null!==i&&(S+=i);const n=this._getColor(Q,q,L,e);return r.kP`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,d.C)({borderColor:n,backgroundColor:n+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.aE)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${J?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(l,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==i?(0,_.iy)(i,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(s,this.hass.locale)} kWh </td> ${I?r.kP` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==o?(0,_.iy)(o,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${t.flow_to.map(((t,e)=>{var a;const s=-1*((0,h.Gi)(this._data.stats[t.stat_energy_to])||0);m+=s;const l=t.stat_compensation||this._data.info.cost_sensors[t.stat_energy_to],c=l?-1*((0,h.Gi)(this._data.stats[l])||0):null;null!==c&&($=!0,y+=c);const o=-1*(J&&(0,h.Gi)(this._data.statsCompare[t.stat_energy_to])||0);C+=o;const i=J&&l?-1*((0,h.Gi)(this._data.statsCompare[l])||0):null;null!==i&&(S+=i);const n=this._getColor(Q,D,R,e);return r.kP`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,d.C)({borderColor:n,backgroundColor:n+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.aE)(this.hass,t.stat_energy_to,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_to])} </th> ${J?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(o,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==i?(0,_.iy)(i,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(s,this.hass.locale)} kWh </td> ${I?r.kP` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==c?(0,_.iy)(c,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))}`))} ${M.grid?r.kP` <tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.grid_total")} </th> ${J?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(C,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${$?(0,_.iy)(S,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(m,this.hass.locale)} kWh </td> ${I?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${$?(0,_.iy)(y,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${null===(i=M.gas)||void 0===i?void 0:i.map(((t,e)=>{var a;const s=(0,h.Gi)(this._data.stats[t.stat_energy_from])||0;f+=s;const l=J&&(0,h.Gi)(this._data.statsCompare[t.stat_energy_from])||0;T+=l;const c=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],o=c?(0,h.Gi)(this._data.stats[c])||0:null;null!==o&&(P=!0,p+=o);const i=J&&c?(0,h.Gi)(this._data.statsCompare[c])||0:null;null!==i&&(E+=i);const n=this._getColor(Q,U,j,e);return r.kP`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,d.C)({borderColor:n,backgroundColor:n+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.aE)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${J?r.kP` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(l,this.hass.locale)} ${Z} </td> ${I?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==i?(0,_.iy)(i,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(s,this.hass.locale)} ${Z} </td> ${I?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==o?(0,_.iy)(o,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${M.gas?r.kP`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.gas_total")} </th> ${J?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(T,this.hass.locale)} ${Z} </td> ${I?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${P?(0,_.iy)(E,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(f,this.hass.locale)} ${Z} </td> ${I?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${P?(0,_.iy)(p,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${null===(n=M.water)||void 0===n?void 0:n.map(((t,e)=>{var a;const s=(0,h.Gi)(this._data.stats[t.stat_energy_from])||0;v+=s;const l=J&&(0,h.Gi)(this._data.statsCompare[t.stat_energy_from])||0;z+=l;const c=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],o=c?(0,h.Gi)(this._data.stats[c])||0:null;null!==o&&(w=!0,k+=o);const i=J&&c?(0,h.Gi)(this._data.statsCompare[c])||0:null;null!==i&&(x+=i);const n=this._getColor(Q,V,Y,e);return r.kP`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,d.C)({borderColor:n,backgroundColor:n+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.aE)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${J?r.kP` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(l,this.hass.locale)} ${X} </td> ${I?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==i?(0,_.iy)(i,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(s,this.hass.locale)} ${X} </td> ${I?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==o?(0,_.iy)(o,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${M.water?r.kP`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.water_total")} </th> ${J?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(z,this.hass.locale)} ${X} </td> ${I?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${w?(0,_.iy)(x,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(v,this.hass.locale)} ${X} </td> ${I?r.kP`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${w?(0,_.iy)(k,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${[P,w,$].filter(Boolean).length>1?r.kP`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.total_costs")} </th> ${J?r.kP`<td class="mdc-data-table__cell"></td> <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(E+S+x,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td>`:""} <td class="mdc-data-table__cell"></td> <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.iy)(p+y+k,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td> </tr>`:""} </tbody> </table> </div> </div> </ha-card>`}},{kind:"get",static:!0,key:"styles",value:function(){return r.gV`${(0,r.sR)(c)} .mdc-data-table{width:100%;border:0}.mdc-data-table__cell,.mdc-data-table__header-cell{color:var(--primary-text-color);border-bottom-color:var(--divider-color);text-align:var(--float-start)}.mdc-data-table__row:not(.mdc-data-table__row--selected):hover{background-color:rgba(var(--rgb-primary-text-color),.04)}.total{--mdc-typography-body2-font-weight:500}.total .mdc-data-table__cell{border-top:1px solid var(--divider-color)}ha-card{height:100%;overflow:hidden}.card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}.cell-bullet{width:32px;padding-right:0;padding-inline-end:0;padding-inline-start:16px;direction:var(--direction)}.bullet{border-width:1px;border-style:solid;border-radius:4px;height:16px;width:32px}.mdc-data-table__cell--numeric{direction:ltr}`}}]}}),(0,m.K)(r.oH));s()}catch(t){s(t)}}))}};
//# sourceMappingURL=13056.dheOhvK_C1k.js.map