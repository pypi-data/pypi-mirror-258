"use strict";(self.webpackChunklino_react=self.webpackChunklino_react||[]).push([[6622],{2457:(e,t,n)=>{n.d(t,{E:()=>d});var s=n(537),i=n(9761),a=n.n(i),_=n(9281),l=n(9158),r=n(50),o=n(683);let p;p={_:n.e(2844).then(n.t.bind(n,8289,23))};(0,_.RegisterImportPool)(p);class d extends l.AutoComplete{async prepare(){this.ex._=this.ex._.default,await super.prepare()}constructor(e){super(e),this.wrapperClasses.push("l-ForeignKeyElement"),this.state={...this.state,currentValue:null},this.dataKeyHidden=e[r.URL_PARAM_WINDOW_TYPE]===r.WINDOW_TYPE_TABLE?e.elem.fields_index_hidden:e.elem.name+"Hidden",this.hasClearButton=!1,this.getSnapshotBeforeUpdate=this.getSnapshotBeforeUpdate.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.choicesURL=this.choicesURL.bind(this),this.getInput=this.getInput.bind(this),this.getValue=this.getValue.bind(this),this.innerHTML=this.innerHTML.bind(this),this.OnExternalLinkClick=this.OnExternalLinkClick.bind(this),this.onSelect=this.onSelect.bind(this),this.clear=this.clear.bind(this)}onReady(){this.setState({currentValue:this.getValue()}),super.onReady()}getSnapshotBeforeUpdate(e,t){if(!this.state.ready)return null;let n=this.getValue();return this.ex._.isEqual(n,this.state.currentValue)?{}:{contextUpdate:n}}componentDidUpdate(e,t,n){n.contextUpdate&&this.setState({value:{...n.contextUpdate},currentValue:n.contextUpdate})}choicesURL(e,t,n){let s=this.props.urlParams,i=s.static.actorData,a=i.chooser_dict&&i.chooser_dict[this.props.elem.name],_={query:e};a&&a.forEach((e=>{if(this.props[r.URL_PARAM_WINDOW_TYPE]!==r.WINDOW_TYPE_TABLE){let t=this.getValueByName(e+"Hidden");void 0===t&&(t=this.getValueByName(e)),_[e]=t}else{let t=i.col.find((t=>t.name===e));_[e]=this.getValueByName(t.fields_index_hidden||t.fields_index)}}));let l=s.controller.actionHandler;return`${s.action_dialog?"apchoices":"choices"}/${s.packId}/${s.actorId}${s.action_dialog?`/${s.an}`:""}/${this.props.elem.name}?${l.parser.stringify(Object.assign(l.defaultStaticParams(),{..._,[r.URL_PARAM_START]:t,[r.URL_PARAM_LIMIT]:n}))}`}getInput(){return super.getInput({onClear:this.clear})}getValue(){return{text:super.getValue(),value:this.getValueByName(this.dataKeyHidden)}}OnExternalLinkClick(e){let t=this.props.elem.field_options.related_actor_id;e.stopPropagation();let n=this.props.urlParams.controller;n.history.pushPath({pathname:`/api/${t.split(".").join("/")}/${this.getValueByName(this.dataKeyHidden)}`,params:n.actionHandler.defaultStaticParams()})}onSelect(e){this.setState({value:e.value}),this.update({[this.dataKey]:e.value.text,[this.dataKeyHidden]:e.value.value})}clear(){this.update({[this.dataKey]:"",[this.dataKeyHidden]:null}),this.setState({value:{text:"",value:null},[r.URL_PARAM_FILTER]:""})}innerHTML(){return null===this.state.value?null:(0,o.jsxs)(s.Fragment,{children:[this.state.value.text&&this.props.link&&this.props.elem.field_options.view_permission&&(0,o.jsx)("div",{className:"l-span-clickable",ref:e=>{e&&(e.onclick=this.OnExternalLinkClick)},children:"↗  "}),(0,o.jsx)("div",{style:{whiteSpace:"nowrap",width:"100%"},children:this.state.value.text||" "})]})}}d.requiredModules=["_"].concat(l.AutoComplete.requiredModules),d.iPool=Object.assign(p,l.AutoComplete.iPool.copy()),d.propTypes={...l.AutoComplete.propTypes,simple:a().bool,link:a().bool},d.defaultProps={...l.AutoComplete.defaultProps,simple:!1,link:!0}},7170:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LinoLayout:()=>LinoLayout,name:()=>name});var _LinoComponents_css__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2841),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(537),prop_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(9761),prop_types__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__),_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(50),_Base__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9281),_Base__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_Base__WEBPACK_IMPORTED_MODULE_3__),_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5145),_ForeignKeyElement__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2457),_TextFieldElement__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1888),_datetime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1224),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(683),_class,_class2,_class3,_class4,_class5,_class6,_class7,_class8;const name="LinoComponents";let ex;const exModulePromises=ex={classNames:__webpack_require__.e(1473).then(__webpack_require__.t.bind(__webpack_require__,116,23)),_:__webpack_require__.e(2844).then(__webpack_require__.t.bind(__webpack_require__,8289,23)),weakKey:__webpack_require__.e(1473).then(__webpack_require__.t.bind(__webpack_require__,6929,23)),prTabView:Promise.all([__webpack_require__.e(3486),__webpack_require__.e(1864)]).then(__webpack_require__.bind(__webpack_require__,8721)),prPanel:Promise.all([__webpack_require__.e(3486),__webpack_require__.e(8185),__webpack_require__.e(6999)]).then(__webpack_require__.bind(__webpack_require__,7730)),prInputText:Promise.resolve().then(__webpack_require__.bind(__webpack_require__,5677)),prCheckbox:Promise.all([__webpack_require__.e(3486),__webpack_require__.e(9179)]).then(__webpack_require__.bind(__webpack_require__,6705)),prFieldset:Promise.all([__webpack_require__.e(3486),__webpack_require__.e(8185),__webpack_require__.e(905)]).then(__webpack_require__.bind(__webpack_require__,4031)),prFileUpload:Promise.all([__webpack_require__.e(3486),__webpack_require__.e(9880),__webpack_require__.e(8185),__webpack_require__.e(8216),__webpack_require__.e(5656)]).then(__webpack_require__.bind(__webpack_require__,3547)),prSplitter:__webpack_require__.e(3486).then(__webpack_require__.bind(__webpack_require__,7651)),prButton:Promise.resolve().then(__webpack_require__.bind(__webpack_require__,7215)),prPassword:Promise.all([__webpack_require__.e(3486),__webpack_require__.e(8016)]).then(__webpack_require__.bind(__webpack_require__,3594)),prProgressSpinner:__webpack_require__.e(9880).then(__webpack_require__.bind(__webpack_require__,3365)),lb:__webpack_require__.e(9779).then(__webpack_require__.bind(__webpack_require__,8928)),sc:Promise.resolve().then(__webpack_require__.bind(__webpack_require__,2985))};function LinoProgressSpinner(e){const t=(0,_Base__WEBPACK_IMPORTED_MODULE_3__.getExReady)(ex,["prProgressSpinner"]);return t.ready?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(t.prProgressSpinner.ProgressSpinner,{animationDuration:"1.5s",strokeWidth:"4",style:{height:"35px",width:"35px"}}):null}(0,_Base__WEBPACK_IMPORTED_MODULE_3__.RegisterImportPool)(ex);const LinoComponents={TabPanel:(_class=class extends _Base__WEBPACK_IMPORTED_MODULE_3__.Component{async prepare(){this.ex._=this.ex._.default}constructor(e){super(e),this.state={...this.state,activeIndex:e.urlParams.tab||0}}getSnapshotBeforeUpdate(e,t){if(!this.state.ready)return null;let n={},s=this.props.urlParams.tab||0;return this.state.activeIndex!=s&&(n.tIndex=s),this.ex._.isEqual(e,this.props)||(n.render=!0),Object.keys(n).length?n:null}componentDidUpdate(e,t,n){n&&("tIndex"in n?this.setState({activeIndex:n.tIndex}):"render"in n&&this.setState({loading:!1}))}render(){return this.state.ready?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(this.ex.prTabView.TabView,{activeIndex:this.state.activeIndex,className:this.ex.classNames.default("lino-panel"),onTabChange:e=>this.props.urlParams.controller.history.replaceState({tab:e.index}),scrollable:!0,children:react__WEBPACK_IMPORTED_MODULE_1__.Children.map(this.props.children,((e,t)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(this.ex.prTabView.TabPanel,{header:e.props.elem.label,contentClassName:"lino-panel",children:e},t)))}):null}},_class.requiredModules=["prTabView","classNames","_"],_class.iPool=ex,_class),Panel:(_class2=class extends _Base__WEBPACK_IMPORTED_MODULE_3__.Component{async prepare(){this.ex.classNames=this.ex.classNames.default,this.ex._=this.ex._.default}constructor(e){super(e),this.state={...this.state,children:null},this.flexs={},this.maintainTableWidth=_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.maintainTableWidth.bind(this),this.messageInterceptor=this.messageInterceptor.bind(this),this.setChildren=this.setChildren.bind(this)}onReady(){this.panel_classes=this.ex.classNames("l-panel",{"l-panel-vertical":this.props.elem.vertical,"l-panel-horizontal":!this.props.elem.vertical,"l-panel-fieldset":this.props.elem.isFieldSet,"l-whitewall-panel-header":"whitewall"===window.App.data.themeName}),this.setChildren(this.props),Object.keys(this.flexs).length>1&&window.addEventListener("message",this.messageInterceptor)}getSnapshotBeforeUpdate(e,t){return this.state.ready?this.ex._.isEqual(e,this.props)?null:"requireRefresh":null}componentDidUpdate(e,t,n){null!==n&&"requireRefresh"===n&&(this.setChildren(this.props),this.setState({loading:!1}))}componentWillUnmount(){Object.keys(this.flexs).length>1&&window.removeEventListener("message",this.messageInterceptor)}messageInterceptor(e){e.data}setChildren(e){let{resizable_panel:t}=e.urlParams.controller.APP.state.site_data;t=t&&!e.urlParams.controller.globals.isMobile&&e.elem.hasOwnProperty("vertical")&&!e.elem.vertical&&e.parent&&["main","TabPanel"].includes(e.parent.react_name);let n=react__WEBPACK_IMPORTED_MODULE_1__.Children.map(e.children,((e,n)=>{let s={};e.props.elem.value.flex&&(s.flex=`1 1 ${e.props.elem.value.flex}%`);let i={style:s,key:n,className:this.ex.classNames("l-component")};return t?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(this.ex.prSplitter.SplitterPanel,{...i,children:e}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{...i,children:e})}));t&&(n=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(this.ex.prSplitter.Splitter,{style:{width:"inherit"},children:n})),this.setState({children:n})}render(){return this.state.ready?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:this.panel_classes,children:[(!this.props.parent||"TabPanel"!==this.props.parent.react_name)&&this.props.elem.label&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("h1",{children:this.props.elem.label}),this.state.children]}):null}},_class2.requiredModules=["classNames","_","prSplitter"],_class2.iPool=ex,_class2),SlaveSummaryPanel:(_class3=class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentDelayedValue{render(){if(!this.state.ready)return null;let e={height:"100%",width:"100%",display:"flex",flexDirection:"column"},t=null===this.state.value&&this.delayed?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(LinoProgressSpinner,{}):this.innerHTML(_constants__WEBPACK_IMPORTED_MODULE_2__.DANGEROUS_HTML);return this.props[_constants__WEBPACK_IMPORTED_MODULE_2__.URL_PARAM_WINDOW_TYPE]===_constants__WEBPACK_IMPORTED_MODULE_2__.WINDOW_TYPE_TABLE?t:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(this.ex.prPanel.Panel,{className:"l-slave-summary-panel",header:this.props.elem.label,icons:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(this.ex.prButton.Button,{className:"p-transparent-button",style:{border:"0px",background:"transparent",color:"black"},onClick:e=>{let t=this.props.urlParams;t.controller.APP.URLContext.history.pushPath({pathname:`/api/${this.actorID.split(".").join("/")}`,params:{mk:t.pk,mt:t.static.actorData.content_type}})},icon:"pi pi-external-link",label:""}),style:e,children:t})}},_class3.requiredModules=_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentDelayedValue.requiredModules.concat(["prPanel","prButton"]),_class3.iPool=Object.assign(ex,_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentDelayedValue.iPool.copy()),_class3),ChoiceListFieldElement:class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInputChoices{constructor(e){super(e),this.options=e.urlParams.controller.APP.state.site_data.choicelists[e.elem.field_options.store]}},ChoicesFieldElement:class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInputChoices{constructor(e){super(e),this.options=e.elem.field_options.store.map((e=>({text:e[1],value:e[0]})))}},URLFieldElement:class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput{constructor(e){super(e),this.innerHTML=this.innerHTML.bind(this)}innerHTML(){let e=this.getValue();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:this.filled()&&this.props[_constants__WEBPACK_IMPORTED_MODULE_2__.URL_PARAM_WINDOW_TYPE]!==_constants__WEBPACK_IMPORTED_MODULE_2__.WINDOW_TYPE_TABLE?"l-ellipsis l-card":"l-ellipsis",style:{display:"block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"290px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("a",{href:e,title:e,children:e||" "})})}},DisplayElement:(_class4=class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentDelayedValue{render(){if(!this.state.ready)return null;let e=null===this.state.value&&this.delayed?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(LinoProgressSpinner,{}):this.innerHTML(_constants__WEBPACK_IMPORTED_MODULE_2__.DANGEROUS_HTML),t=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.Labeled,{...this.props,elem:this.props.elem,isFilled:this.filled(),children:e});return this.props.elem.value.collapsible?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(this.ex.prFieldset.Fieldset,{toggleable:!0,collapsed:this.props.urlParams.globals.isMobile,children:t}):t}},_class4.requiredModules=["prFieldset"].concat(_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentDelayedValue.requiredModules),_class4.iPool=Object.assign(ex,_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentDelayedValue.iPool.copy()),_class4),ConstantElement:e=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{dangerouslySetInnerHTML:{__html:e.elem.value.html||" "}}),CharFieldElement:class CharFieldElement extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput{async prepare(){await super.prepare(),this.re=this.props.elem.field_options.maskRe&&eval(this.props.elem.field_options.maskRe),this.inputState={...this.inputState,onChangeUpdateAssert:(t=>!(this.re&&!this.re.exec(e.target.value))).bind(this)}}},DecimalFieldElement:class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput{async prepare(){await super.prepare(),this.inputState={...this.inputState,inputProps:{keyfilter:"num"}}}},IntegerFieldElement:class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput{async prepare(){await super.prepare(),this.inputState={...this.inputState,inputProps:{keyfilter:"int"}}}},UppercaseTextFieldElement:class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput{async prepare(){await super.prepare(),this.inputState={...this.inputState,inputProps:{onInput:e=>{event.target.value=(""+event.target.value).toUpperCase()}}}}},IBANFieldElement:class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput{async prepare(){await super.prepare(),this.inputState={...this.inputState,inputProps:{onInput:e=>{e.target.value=(""+e.target.value).toUpperCase().replace(/[^ ]{4}(?! )(?!$)/g,(e=>e+" "))}}}}},PasswordFieldElement:(_class5=class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput{async prepare(){await super.prepare(),this.inputState={...this.inputState,inputOnly:!0,inputComponent:this.ex.prPassword.Password,inputProps:{feedback:!1,promptLabel:""}}}},_class5.requiredModules=["prPassword"].concat(_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput.requiredModules),_class5.iPool=Object.assign(ex,_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput.iPool.copy()),_class5),AutoFieldElement:class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput{async prepare(){await super.prepare(),this.inputState={...this.inputState,inputProps:{type:"text",keyfilter:"pint"}}}},BooleanFieldElement:(_class6=class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput{constructor(e){super(e),this.innerHTML=()=>this.getInput(),this.onChangeUpdate=this.onChangeUpdate.bind(this),this.innerHTML=this.innerHTML.bind(this)}async prepare(){await super.prepare(),this.inputState={...this.inputState,inputComponent:this.ex.prCheckbox.Checkbox,onChangeUpdateAssert:e=>!(this.props[_constants__WEBPACK_IMPORTED_MODULE_2__.URL_PARAM_WINDOW_TYPE]===_constants__WEBPACK_IMPORTED_MODULE_2__.WINDOW_TYPE_TABLE&&"Enter"===e.originalEvent.key)}}onChangeUpdate(e){this.update({[this.dataKey]:e.checked}),this.props[_constants__WEBPACK_IMPORTED_MODULE_2__.URL_PARAM_WINDOW_TYPE]===_constants__WEBPACK_IMPORTED_MODULE_2__.WINDOW_TYPE_TABLE?this.submit():this.setState({})}render(){return this.state.ready?(this.inputState.inputProps={readOnly:this.disabled(),checked:this.getValue()||!1},super.render()):null}},_class6.requiredModules=["prCheckbox"].concat(_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput.requiredModules),_class6.iPool=Object.assign(ex,_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput.iPool.copy()),_class6),PreviewTextFieldElement:_TextFieldElement__WEBPACK_IMPORTED_MODULE_6__.v,TextFieldElement:_TextFieldElement__WEBPACK_IMPORTED_MODULE_6__.S,DateFieldElement:_datetime__WEBPACK_IMPORTED_MODULE_7__.DateFieldElement,TimeFieldElement:_datetime__WEBPACK_IMPORTED_MODULE_7__.TimeFieldElement,ForeignKeyElement:_ForeignKeyElement__WEBPACK_IMPORTED_MODULE_5__.E,FileFieldElement:(_class7=class extends _LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput{constructor(e){super(e),this.disabled=this.disabled.bind(this)}async prepare(){await super.prepare(),this.ex.weakKey=this.ex.weakKey.default,this.UPLOAD_HANDLER_EVENT={files:{},options:null}}componentWillUnmount(){this.props.urlParams.controller.dataContext.saveUploadHandlerEvent(null)}disabled(){return this.props[_constants__WEBPACK_IMPORTED_MODULE_2__.URL_PARAM_WINDOW_TYPE]===_constants__WEBPACK_IMPORTED_MODULE_2__.WINDOW_TYPE_DETAIL||super.disabled()}getInput(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(this.ex.prFileUpload.FileUpload,{auto:!0,customUpload:!0,multiple:!0,name:this.dataKey,onRemove:e=>{delete this.UPLOAD_HANDLER_EVENT.files[this.ex.weakKey(e.file)],Object.keys(this.UPLOAD_HANDLER_EVENT).length||this.props.urlParams.controller.dataContext.saveUploadHandlerEvent(null)},uploadHandler:e=>{e.files.forEach(((e,t)=>{this.UPLOAD_HANDLER_EVENT.files[this.ex.weakKey(e)]=e})),this.UPLOAD_HANDLER_EVENT.options=e.options,this.props.urlParams.controller.dataContext.saveUploadHandlerEvent(this.UPLOAD_HANDLER_EVENT)},url:`api/${this.props.urlParams.packId}/${this.props.urlParams.actorId}`})}innerHTML(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("a",{href:"/media/"+this.getValue(),children:[" ",this.getValue()||" "," "]})}},_class7.requiredModules=["prFileUpload","weakKey"].concat(_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput.requiredModules),_class7.iPool=Object.assign(ex,_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentInput.iPool.copy()),_class7),SlaveContainer:(_class8=class extends _Base__WEBPACK_IMPORTED_MODULE_3__.Component{render(){return this.state.ready?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(this.ex.sc.URLContext,{getChildren:e=>{let t=this.ex.lb.LinoBody,n=e[_constants__WEBPACK_IMPORTED_MODULE_2__.URL_PARAM_DISPLAY_MODE],s=[_constants__WEBPACK_IMPORTED_MODULE_2__.DISPLAY_MODE_SUMMARY,_constants__WEBPACK_IMPORTED_MODULE_2__.DISPLAY_MODE_HTML].includes(n)?this.props.elem[n]:null;return e.controller.filled(s)&&(t=LinoComponents[s.react_name]),e.controller.filled(s)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(t,{elem:s,...this.props}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(t,{actorData:e.static.actorData,inDetail:!0})},params:{[_constants__WEBPACK_IMPORTED_MODULE_2__.URL_PARAM_MASTER_PK]:this.props.urlParams.pk,[_constants__WEBPACK_IMPORTED_MODULE_2__.URL_PARAM_MASTER_TYPE]:this.props.urlParams.static.actorData.content_type},parentContext:this.props.urlParams.controller,path:`/api/${this.props.elem.actor_id.split(".").join("/")}`,simple:!1}):null}},_class8.requiredModules=["lb","sc"],_class8.iPool=ex,_class8),SimpleRemoteComboFieldElement:e=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ForeignKeyElement__WEBPACK_IMPORTED_MODULE_5__.E,{...e,simple:!0,link:!1}),UnknownElement:e=>{const t=react__WEBPACK_IMPORTED_MODULE_1__.useContext(_Base__WEBPACK_IMPORTED_MODULE_3__.DataContextType);let n=_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.ABCComponent.getValueByName({name:e[_constants__WEBPACK_IMPORTED_MODULE_2__.URL_PARAM_WINDOW_TYPE]===_constants__WEBPACK_IMPORTED_MODULE_2__.WINDOW_TYPE_TABLE?e.elem.fields_index:e.elem.name,props:e,context:t});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.Labeled,{...e,elem:e.elem,labeled:e.labeled,isFilled:e.urlParams.controller.filled(n),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{children:n||" "})})}};LinoComponents.Panel.defaultProps={header:!0},LinoComponents.ActionParamsPanel=LinoComponents.Panel,LinoComponents.ParamsPanel=LinoComponents.Panel,LinoComponents.DetailMainPanel=LinoComponents.Panel,LinoComponents.ComplexRemoteComboFieldElement=LinoComponents.ForeignKeyElement,LinoComponents.QuantityFieldElement=LinoComponents.CharFieldElement,LinoComponents.HtmlBoxElement=LinoComponents.SlaveSummaryPanel,LinoComponents.DateTimeFieldElement=LinoComponents.DisplayElement,LinoComponents.GenericForeignKeyElement=LinoComponents.DisplayElement,LinoComponents.IncompleteDateFieldElement=LinoComponents.CharFieldElement,LinoComponents.ManyToManyElement=LinoComponents.DisplayElement,LinoComponents.StoryElement=LinoComponents.SlaveSummaryPanel,LinoComponents.ListElement=LinoComponents.SlaveSummaryPanel,LinoComponents.GridElement=LinoComponents.SlaveContainer;class LinoLayout extends _Base__WEBPACK_IMPORTED_MODULE_3__.Component{async prepare(){this.ex.weakKey=this.ex.weakKey.default}constructor(e){super(e),this.inputCount=0,this.renderComponent=this.renderComponent.bind(this)}render(){if(!this.state.ready)return null;this.inputCount=0;let e=this.props.elem?this.props.elem:this.context.controller.APP.state.site_data.form_panels[this.props.window_layout].main;return this.renderComponent(e.react_name,{...this.props,elem:e})}renderComponent(e,t){let n=LinoComponents[e];return void 0===n&&(n=LinoComponents.UnknownElement,console.warn(`${e} does not exist`)),this.inputCount+=1,t.tabIndex=this.props.tabIndex>-1?this.props.tabIndex:this.inputCount,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(n,{...t,urlParams:this.context,editing_mode:t.editing_mode||this.context.editing_mode,children:t.elem.items&&t.elem.items.filter((e=>!e.hidden)).map(((e,n)=>this.renderComponent(e.react_name,{...t,editing_mode:t.editing_mode||this.context.editing_mode,key:this.ex.weakKey(e),elem:e,parent:t.elem,urlParams:this.context})))})}}LinoLayout.requiredModules=["weakKey"],LinoLayout.iPool=ex,LinoLayout.contextType=_Base__WEBPACK_IMPORTED_MODULE_3__.URLContextType,LinoLayout.propTypes={..._LinoComponentUtils__WEBPACK_IMPORTED_MODULE_4__.LeafComponentBase.propTypesFromLinoLayout,window_layout:prop_types__WEBPACK_IMPORTED_MODULE_9___default().string},LinoLayout.defaultProps={editing_mode:!1,tabIndex:-1}},1888:(e,t,n)=>{n.d(t,{v:()=>w,S:()=>B});var s=n(3379),i=n.n(s),a=n(7795),_=n.n(a),l=n(569),r=n.n(l),o=n(3565),p=n.n(o),d=n(9216),u=n.n(d),c=n(4589),h=n.n(c),m=n(3629),E={};E.styleTagTransform=h(),E.setAttributes=p(),E.insert=r().bind(null,"head"),E.domAPI=_(),E.insertStyleElement=u();i()(m.Z,E);m.Z&&m.Z.locals&&m.Z.locals;var P=n(537),C=n(9281),b=(n(6275),n(683));let L;L={queryString:Promise.resolve().then(n.bind(n,5876))};(0,C.RegisterImportPool)(L);const x=[{value:"Mention @People"}],D=[{value:"Tag #content"}],A=({silentFetch:e,signal:t})=>({allowedChars:/^[A-Za-z0-9\s]*$/,mentionDenotationChars:window.App.state.site_data.suggestors,source:function(n,s,i){if(0===n.length){s("@"===i?x:D,n)}else L.resolve(["queryString"]).then((({queryString:a})=>{e({path:`suggestions?${a.default.stringify({query:n,trigger:i})}`,signal:t}).then((e=>s(e.suggestions,n)))}))},listItemClass:"ql-mention-list-item",mentionContainerClass:"ql-mention-list-container",mentionListClass:"ql-mention-list",dataAttributes:["value","link","title","denotationChar"]}),M=(0,b.jsxs)(P.Fragment,{children:[(0,b.jsxs)("span",{className:"ql-formats",children:[(0,b.jsxs)("select",{className:"ql-header",defaultValue:"0",children:[(0,b.jsx)("option",{value:"1",children:"Heading"}),(0,b.jsx)("option",{value:"2",children:"Subheading"}),(0,b.jsx)("option",{value:"0",children:"Normal"})]}),(0,b.jsxs)("select",{className:"ql-font",children:[(0,b.jsx)("option",{defaultValue:!0}),(0,b.jsx)("option",{value:"serif"}),(0,b.jsx)("option",{value:"monospace"})]})]}),(0,b.jsx)("span",{className:"ql-formats",children:(0,b.jsxs)("select",{className:"ql-size",children:[(0,b.jsx)("option",{value:"small"}),(0,b.jsx)("option",{defaultValue:!0}),(0,b.jsx)("option",{value:"large"}),(0,b.jsx)("option",{value:"huge"})]})}),(0,b.jsxs)("span",{className:"ql-formats",children:[(0,b.jsx)("button",{className:"ql-script",value:"sub"}),(0,b.jsx)("button",{className:"ql-script",value:"super"})]}),(0,b.jsxs)("span",{className:"ql-formats",children:[(0,b.jsx)("button",{type:"button",className:"ql-bold","aria-label":"Bold"}),(0,b.jsx)("button",{type:"button",className:"ql-italic","aria-label":"Italic"}),(0,b.jsx)("button",{type:"button",className:"ql-underline","aria-label":"Underline"})]}),(0,b.jsxs)("span",{className:"ql-formats",children:[(0,b.jsx)("select",{className:"ql-color"}),(0,b.jsx)("select",{className:"ql-background"})]}),(0,b.jsxs)("span",{className:"ql-formats",children:[(0,b.jsx)("button",{type:"button",className:"ql-list",value:"ordered","aria-label":"Ordered List"}),(0,b.jsx)("button",{type:"button",className:"ql-list",value:"bullet","aria-label":"Unordered List"}),(0,b.jsxs)("select",{className:"ql-align",children:[(0,b.jsx)("option",{defaultValue:!0}),(0,b.jsx)("option",{value:"center"}),(0,b.jsx)("option",{value:"right"}),(0,b.jsx)("option",{value:"justify"})]})]}),(0,b.jsxs)("span",{className:"ql-formats",children:[(0,b.jsx)("button",{type:"button",className:"ql-link","aria-label":"Insert Link"}),(0,b.jsx)("button",{type:"button",className:"ql-image","aria-label":"Insert Image"}),(0,b.jsx)("button",{type:"button",className:"ql-code-block","aria-label":"Insert Code Block"})]}),(0,b.jsx)("span",{className:"ql-formats",children:(0,b.jsx)("button",{type:"button",className:"ql-clean","aria-label":"Remove Styles"})})]}),O={header:M,headerMain:(e={})=>(0,b.jsxs)(P.Fragment,{children:[M,(0,b.jsx)("span",{className:"ql-formats",children:(0,b.jsx)("button",{type:"button",ref:e.ref,"aria-label":"Open in own window",children:(0,b.jsx)("i",{className:"pi pi-external-link"})})})]})};var I=n(50),g=n(5145);let T;T={AbortController:Promise.resolve().then(n.t.bind(n,76,23)),prButton:Promise.resolve().then(n.bind(n,7215)),prEditor:n.e(3486).then(n.bind(n,7453)),prDialog:Promise.all([n.e(9880),n.e(5092)]).then(n.bind(n,9133))};(0,C.RegisterImportPool)(T);class y extends C.Component{async prepare(){this.controller=new this.ex.AbortController.default}render(){return this.state.ready?(0,b.jsx)("div",{className:"l-editor",onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&83===e.keyCode?(e.stopPropagation(),e.preventDefault(),this.props.onDone(e)):e.stopPropagation()},children:(0,b.jsx)(this.ex.prDialog.Dialog,{header:this.props.label,icons:(0,b.jsx)(this.ex.prButton.Button,{className:"p-transparent-button",style:{border:"0px",background:"transparent",color:"black"},onClick:e=>{this.props.onDone(e)},icon:"pi pi-save",tooltip:"Save!",label:""}),maximizable:!0,modal:!0,onHide:e=>{this.props.onClose(e)},style:{width:"70vw",height:"85vw"},contentStyle:{height:"100%"},visible:this.props.visible,children:(0,b.jsx)(this.ex.prEditor.Editor,{headerTemplate:O.header,modules:{mention:A({silentFetch:this.props.silentFetch,signal:this.controller.signal})},onTextChange:e=>this.props.onTextChange(e),value:this.props.value})})}):null}}let U;y.requiredModules=["AbortController","prButton","prEditor","prDialog"],y.iPool=T;U={AbortController:Promise.resolve().then(n.t.bind(n,76,23)),prButton:Promise.resolve().then(n.bind(n,7215)),prEditor:n.e(3486).then(n.bind(n,7453)),prPanel:Promise.all([n.e(3486),n.e(8185),n.e(6999)]).then(n.bind(n,7730))};(0,C.RegisterImportPool)(U);class B extends g.LeafComponentInput{constructor(e){super(e),this.state={...this.state,new_window:!1},this.ownWindowButton=P.createRef(),this.getInput=this.getInput.bind(this),this.innerHTML=this.innerHTML.bind(this),this.onDiagClose=this.onDiagClose.bind(this),this.onDiagDone=this.onDiagDone.bind(this),this.onTextChange=this.onTextChange.bind(this),this.onQuillLoad=this.onQuillLoad.bind(this),this.updateValue=this.updateValue.bind(this)}async prepare(){await super.prepare(),this.controller=new this.ex.AbortController.default,this.setLeafRef({input:!0,type:this.props.elem.field_options.virtualField?"virtual":""})}componentWillUnmount(){this.controller.abort()}getInput(){return(0,b.jsx)(P.Fragment,{children:(0,b.jsx)("div",{className:"l-editor",style:{position:"relative"},onClick:e=>{e.stopPropagation()},onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&83===e.keyCode||e.stopPropagation()},children:(0,b.jsx)(this.ex.prEditor.Editor,{headerTemplate:this.props.elem.field_options.noEditorHeader?(0,b.jsx)("div",{}):O.headerMain({ref:this.ownWindowButton}),modules:{mention:A({silentFetch:this.props.urlParams.controller.actionHandler.silentFetch,signal:this.controller.signal})},onLoad:this.onQuillLoad,onTextChange:this.onTextChange,ref:e=>this.inputEl=e,style:{height:"100%"},tabIndex:this.props.tabIndex,value:this.getValue()})})})}innerHTML(){if(this.disabled())return super.innerHTML(I.DANGEROUS_HTML);if(this.props.elem.field_options.alwaysEditable)return(0,b.jsx)(P.Fragment,{children:this.getInput()});let e=super.innerHTML(I.DANGEROUS_HTML);return this.props[I.URL_PARAM_WINDOW_TYPE]===I.WINDOW_TYPE_TABLE?e:(0,b.jsx)(this.ex.prPanel.Panel,{headerTemplate:(0,b.jsxs)("div",{className:"p-panel-header",children:[this.props.elem.label,!this.disabled()&&(0,b.jsx)(this.ex.prButton.Button,{className:"p-transparent-button",style:{border:"0px",background:"transparent",color:"black"},onClick:e=>{e.stopPropagation(),this.setState({new_window:!0})},icon:"pi pi-pencil",tooltip:"Edit this text in own window",tooltipOptions:{position:"left"},label:""})]}),style:{display:"flex",flexDirection:"column",height:"100%"},children:e})}updateValue(e){this.update({[this.dataKey]:e})}onDiagClose(e){this.setState({new_window:!1})}onDiagDone(){this.setState({new_window:!1}),this.submit()}onTextChange(e){let t=e.htmlValue||"";this.updateValue(t),this.setState({})}onQuillLoad(){this.tabIndexMatch()&&this.inputEl.getQuill().focus(),this.props.elem.field_options.noEditorHeader||this.ownWindowButton.current.addEventListener("click",(e=>{e.stopPropagation(),this.setState({new_window:!0})}))}render(){return this.state.ready?(0,b.jsxs)(P.Fragment,{children:[super.render(),(0,b.jsx)(y,{silentFetch:this.props.urlParams.controller.actionHandler.silentFetch,onTextChange:this.onTextChange,onClose:this.onDiagClose,onDone:this.onDiagDone,value:this.getValue(),visible:this.state.new_window})]}):null}}B.requiredModules=["AbortController","prButton","prEditor","prPanel"].concat(g.LeafComponentInput.requiredModules),B.iPool=Object.assign(U,g.LeafComponentInput.iPool.copy());const w=B},1224:(e,t,n)=>{n.r(t),n.d(t,{DateFieldElement:()=>u,DateFilter:()=>h,TimeFieldElement:()=>c,name:()=>o});n(537);var s=n(9761),i=n.n(s),a=n(50),_=n(5145),l=n(9281),r=n(683);const o="datetime";let p;p={prCalendar:Promise.all([n.e(1295),n.e(3486),n.e(7353),n.e(5155),n.e(9961),n.e(3081),n.e(5894),n.e(9749),n.e(3588)]).then(n.bind(n,3582))};(0,l.RegisterImportPool)(p);class d extends _.LeafComponentInput{constructor(e){super(e),this.innerHTML=()=>(0,r.jsx)("div",{children:super.getValue()||" "}),this.isValid=e=>null===e||e instanceof Date||this.str2date(e)instanceof Date,this.getInput=this.getInput.bind(this),this.getValue=this.getValue.bind(this),this.innerHTML=this.innerHTML.bind(this),this.isValid=this.isValid.bind(this),this.updateValue=this.updateValue.bind(this)}getInput(e={}){return(0,r.jsx)(this.ex.prCalendar.Calendar,{...e,className:"l-DateFieldElement",inputMode:this.props.urlParams.controller.globals.isMobile?"numeric":"none",inputStyle:{width:"100%"},keepInvalid:!0,onChange:e=>this.updateValue(e),onClearButtonClick:e=>{e.value=null,this.updateValue(e)},onSelect:e=>this.updateValue(e),ref:this.onInputRef,showButtonBar:!0,showIcon:this.props[a.URL_PARAM_WINDOW_TYPE]!==a.WINDOW_TYPE_TABLE,showOnFocus:!1,style:{width:"100%"},tabIndex:this.props.tabIndex,value:this.getValue()})}getValue(){let e=super.getValue();return this.props.urlParams.controller.filled(e)?this.str2date(e):null}updateValue(e){let t=e.value;this.props.urlParams.controller.filled(t)?t instanceof Date&&(t=this.date2str(t)):t=null,this.container.classList.remove("dangling-modification"),this.container.classList.remove("unsaved-modification"),this.isValid(t)?(this.update({[this.dataKey]:t}),this.setCellStyle(this.container)):this.container.classList.add("dangling-modification")}}d.requiredModules=["prCalendar"].concat(_.LeafComponentInput.requiredModules),d.iPool=Object.assign(p,_.LeafComponentInput.iPool.copy());class u extends d{constructor(e){super(e),this.date2str=this.date2str.bind(this),this.getInput=this.getInput.bind(this),this.str2date=this.str2date.bind(this)}date2str(e){return("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+e.getFullYear()}getInput(){return super.getInput({dateFormat:"dd.mm.yy",yearNavigator:!0,yearRange:"1900:2900"})}str2date(e){let t=e.split(".");return 3===t.length&&!t.includes("")&&4===t[2].length&&new Date(t[2],t[1]-1,t[0])}}class c extends d{constructor(e){super(e),this.date2str=this.date2str.bind(this),this.getInput=this.getInput.bind(this),this.str2date=this.str2date.bind(this)}date2str(e){return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)}getInput(){return super.getInput({hourFormat:"24",showTime:!0,timeOnly:!0})}str2date(e){let t=/^(\d(?:\d(?=[.,:; ]?\d\d|[.,:; ]\d|$))?)?[.,:; ]?(\d{0,2})$/g;if(e.match(t)){let n=t.exec(e),s=new Date,i=n[1],a=n[2];return s.setHours(i||0),s.setMinutes(a||0),s}return!1}}class h extends u{constructor(e){super(e),this.filled=()=>this.props.parent.context.controller.filled(this.props.value),this.disabled=()=>!1,this.update=e=>this.props.parent.pushFilter({value:e[this.dataKey]}),this.disabled=this.disabled.bind(this),this.filled=this.filled.bind(this),this.getValue=this.getValue.bind(this),this.update=this.update.bind(this)}getValue(){return this.filled()?this.str2date(this.props.parent.state.value):null}}h.propTypes={parent:i().object.isRequired},h.defaultProps={editing_mode:!0,hide_label:!0}},7836:(e,t,n)=>{n.d(t,{Z:()=>l});var s=n(7757),i=n.n(s),a=n(5649),_=n.n(a)()(i());_.push([e.id,".dangling-modification {\n    background: #ffff0030;\n}\n.unsaved-modification {\n    background: #ff00ff20;\n}\n\n.inline-display {\n    display: inline;\n}\n","",{version:3,sources:["webpack://./lino_react/react/components/LinoComponents.css"],names:[],mappings:"AAAA;IACI,qBAAqB;AACzB;AACA;IACI,qBAAqB;AACzB;;AAEA;IACI,eAAe;AACnB",sourcesContent:[".dangling-modification {\n    background: #ffff0030;\n}\n.unsaved-modification {\n    background: #ff00ff20;\n}\n\n.inline-display {\n    display: inline;\n}\n"],sourceRoot:""}]);const l=_},3629:(e,t,n)=>{n.d(t,{Z:()=>l});var s=n(7757),i=n.n(s),a=n(5649),_=n.n(a)()(i());_.push([e.id,".ql-mention-list {\n    list-style: none;\n    list-style-type: none;\n    list-style-position: inside;\n    padding: 0;\n    margin: 0;\n}\n.ql-mention-list-item {\n    padding: 6px;\n}\n.ql-mention-list-item.selected {\n    background-color: #002c932e;\n    border: 0px solid white;\n    border-radius: 2px;\n    font-size: 110%;\n}\n.ql-mention-list-container {\n    border: 2px solid gray;\n    background-color: white;\n    box-shadow: 0 5px 5px 0 gray, 0 5px 5px 0 gray;\n}\n.search-match {\n    background-color: #f7f7f7b5;\n}\n.p-transparent-button.p-button:focus {\n    box-shadow: 0 0 white;\n}\n","",{version:3,sources:["webpack://./lino_react/react/components/TextFieldElement.css"],names:[],mappings:"AAAA;IACI,gBAAgB;IAChB,qBAAqB;IACrB,2BAA2B;IAC3B,UAAU;IACV,SAAS;AACb;AACA;IACI,YAAY;AAChB;AACA;IACI,2BAA2B;IAC3B,uBAAuB;IACvB,kBAAkB;IAClB,eAAe;AACnB;AACA;IACI,sBAAsB;IACtB,uBAAuB;IACvB,8CAA8C;AAClD;AACA;IACI,2BAA2B;AAC/B;AACA;IACI,qBAAqB;AACzB",sourcesContent:[".ql-mention-list {\n    list-style: none;\n    list-style-type: none;\n    list-style-position: inside;\n    padding: 0;\n    margin: 0;\n}\n.ql-mention-list-item {\n    padding: 6px;\n}\n.ql-mention-list-item.selected {\n    background-color: #002c932e;\n    border: 0px solid white;\n    border-radius: 2px;\n    font-size: 110%;\n}\n.ql-mention-list-container {\n    border: 2px solid gray;\n    background-color: white;\n    box-shadow: 0 5px 5px 0 gray, 0 5px 5px 0 gray;\n}\n.search-match {\n    background-color: #f7f7f7b5;\n}\n.p-transparent-button.p-button:focus {\n    box-shadow: 0 0 white;\n}\n"],sourceRoot:""}]);const l=_},2841:(e,t,n)=>{var s=n(3379),i=n.n(s),a=n(7795),_=n.n(a),l=n(569),r=n.n(l),o=n(3565),p=n.n(o),d=n(9216),u=n.n(d),c=n(4589),h=n.n(c),m=n(7836),E={};E.styleTagTransform=h(),E.setAttributes=p(),E.insert=r().bind(null,"head"),E.domAPI=_(),E.insertStyleElement=u();i()(m.Z,E),m.Z&&m.Z.locals&&m.Z.locals}}]);
//# sourceMappingURL=main.LinoComponents_LinoDetail.738cc3cc6f16793c258b.js.map