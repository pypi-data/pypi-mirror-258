"use strict";(self.webpackChunknonebot=self.webpackChunknonebot||[]).push([[367],{22974:(e,t,a)=>{a.d(t,{l:()=>d});var l=a(27378),n=a(38944),r=a(25773),s=a(92739),c=a(36547),o=a(37270);function i(e){let{label:t,color:a,className:r,onClick:s}=e;return l.createElement("span",{className:(0,n.Z)("tag",r),style:{backgroundColor:a,color:(0,o.k)(a,"#fff","#000")},onClick:s},t)}function m(e){let{allowTags:t,onTagUpdate:a}=e;const[o,m]=(0,l.useState)([]),[u,d]=(0,l.useState)(""),[p,f]=(0,l.useState)("#ea5252"),g=Array.from(new Set(t.filter((e=>e.label.toLocaleLowerCase().includes(u))).map((e=>e.label)))).slice(0,5),b=()=>u.length>=1&&u.length<=10;return l.createElement(l.Fragment,null,l.createElement("label",{className:"flex flex-wrap gap-x-1 gap-y-1"},o.map(((e,t)=>l.createElement(i,(0,r.Z)({key:t},e,{className:"cursor-pointer",onClick:()=>(e=>{const t=o.filter(((t,a)=>a!==e));m(t),a(t)})(t)})))),o.length<3&&l.createElement("span",{className:(0,n.Z)("add-btn",{"add-btn-disabled":!b()}),onClick:()=>(()=>{if(!(o.length>=3)&&b()){const e={label:u,color:p},t=[...o,e];m(t),a(t)}})()},l.createElement(s.G,{className:"pr-1",icon:["fas","plus"]}),"\u65b0\u5efa\u6807\u7b7e")),l.createElement("div",{className:"form-item-container"},l.createElement("span",{className:"form-item-title"},"\u6807\u7b7e\u540d\u79f0"),l.createElement("div",{className:"dropdown dropdown-bottom w-full"},l.createElement("input",{type:"text",value:u,className:"form-item form-item-input",placeholder:"\u8bf7\u8f93\u5165",onChange:e=>d(e.target.value)}),g.length>0&&l.createElement("ul",{tabIndex:0,className:"dropdown-content z-10 menu p-2 shadow bg-base-100 rounded-box w-52"},g.map((e=>l.createElement("li",{key:e},l.createElement("a",{onClick:()=>d(e)},e))))))),l.createElement("div",{className:"form-item-container"},l.createElement("span",{className:"form-item-title"},"\u6807\u7b7e\u989c\u8272"),l.createElement(c.AI,{className:"my-4 fix-input-color",color:p,disableAlpha:!0,onChangeComplete:e=>{f(e.hex)}})))}var u=a(62434);function d(e){let{type:t,children:a,formItems:r,handleSubmit:s}=e;const[c,o]=(0,l.useState)(0),[i,m]=(0,l.useState)({}),[d,f]=(0,l.useState)([]);(0,l.useEffect)((()=>{(0,u.q)(t).then((e=>f(e.filter((e=>e.tags.length>0)).map((e=>e.tags)).flat()))).catch((e=>{console.error(e)}))}),[t]);const g=(e,t)=>{m({...i,[e]:t})};return l.createElement(l.Fragment,null,l.createElement("ul",{className:"steps"},r.map(((e,t)=>l.createElement("li",{key:t,className:(0,n.Z)("step",c===t&&"step-primary")},e.name)))),l.createElement("div",{className:"form-control w-full min-h-[300px]"},a||r[c].items.map((e=>l.createElement(p,{key:e.name,type:e.type,name:e.name,labelText:e.labelText,allowTags:d,result:i,setResult:g})))),l.createElement("div",{className:"flex justify-between"},l.createElement("button",{className:(0,n.Z)("form-btn form-btn-prev",{"form-btn-hidden":0===c}),onClick:()=>c>0&&o(c-1)},"\u4e0a\u4e00\u6b65"),l.createElement("button",{className:"form-btn form-btn-next",onClick:()=>c<r.length-1?void(r[c].items.map((e=>e.name)).every((e=>i[e]))&&o(c+1)):s(i)},c===r.length-1?"\u63d0\u4ea4":"\u4e0b\u4e00\u6b65")))}function p(e){let{type:t,name:a,labelText:r,allowTags:s,result:c,setResult:o}=e;return l.createElement(l.Fragment,null,l.createElement("label",{className:"label"},l.createElement("span",{className:"label-text"},r)),"text"===t&&l.createElement("input",{value:c[a]||"",type:"text",name:a,onChange:e=>o(a,e.target.value),placeholder:"\u8bf7\u8f93\u5165",className:(0,n.Z)("form-input",{"form-input-error":!c[a]})}),"text"===t&&!c[a]&&l.createElement("label",{className:"label"},l.createElement("span",{className:"form-label form-label-error"},"\u8bf7\u8f93\u5165",r)),"tag"===t&&l.createElement(m,{allowTags:s,onTagUpdate:e=>o(a,JSON.stringify(e))}))}},69220:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(27378),n=a(38944),r=a(31112);function s(e){let{setOpenModal:t,className:a,children:s,useCustomTitle:c,backdropExit:o,title:i}=e;const[m,u]=(0,l.useState)(""),d=()=>u("fade-out");return(0,l.useEffect)((()=>u("fade-in")),[]),l.createElement("div",{className:(0,n.Z)("nb-modal-root",a)},l.createElement("div",{className:(0,n.Z)("nb-modal-backdrop",m),onTransitionEnd:()=>"fade-out"===m&&t(!1),onClick:()=>o&&d()}),l.createElement("div",{className:(0,n.Z)("nb-modal-container",m)},l.createElement("div",{className:"card bg-base-100 shadow-xl max-w-2xl"},l.createElement("div",{className:"card-body"},!c&&l.createElement("div",{className:"nb-modal-title"},i,l.createElement("div",{className:"card-actions ml-auto"},l.createElement("button",{className:"btn btn-square btn-sm",onClick:d},l.createElement(r.Z,null)))),s))))}},12440:(e,t,a)=>{a.d(t,{Z:()=>c});var l=a(27378),n=a(38944),r=a(92739);const s=7;function c(e){let{className:t,totalPages:a,currentPage:c,setPreviousPage:o,setNextPage:i,setPage:m,previousEnabled:u,nextEnabled:d}=e;const p=(0,l.useCallback)(((e,t)=>{const a=[];for(let l=e=e>0?e:1;l<=t;l++)a.push(l);return a}),[]),f=[],g=l.createElement(r.G,{icon:"ellipsis-h"}),b=s%2==0?1:0,h=Math.floor(s/2),E=a-h+b+1;if(c+=1,a<=s)f.push(...p(1,a));else if(c>h&&c<E){const e=c-h+2,t=c+h-2-b,l=e-1===1+1?2:g,n=t+1===a-1?t+1:g;f.push(1,l,...p(e,t),n,a)}else if(c===h){const e=c+h-1-b;f.push(...p(1,e),g,a)}else if(c===E){const e=c-h+1;f.push(1,g,...p(e,a))}else f.push(...p(1,h),g,...p(E,a));return l.createElement("nav",{className:(0,n.Z)("paginate-container",t),role:"navigation","aria-label":"Pagination Navigation"},l.createElement("button",{className:"paginate-button",onClick:o,disabled:!u},l.createElement(r.G,{icon:["fas","chevron-left"]})),l.createElement("ul",{className:"paginate-pager"},f.map(((e,t)=>l.createElement("li",{key:t,className:(0,n.Z)("paginate-button","number"!=typeof e&&"ellipsis",c===e&&"active"),onClick:()=>"number"==typeof e&&c!==e&&m(e-1)},e)))),l.createElement("button",{className:"paginate-button",onClick:i,disabled:!d},l.createElement(r.G,{icon:["fas","chevron-right"]})))}},44633:(e,t,a)=>{a.d(t,{Z:()=>i});var l=a(25773),n=a(27378),r=a(38944),s=a(81884),c=a(92739),o=a(91857);function i(e){let{resource:t,onClick:a,onTagClick:i,onAuthorClick:m,className:u}=e;const d=/^https:\/\/github.com\/[^/]+\/[^/]+/.test(t.homepage),p="plugin"===t.resourceType,f=p&&`https://registry.nonebot.dev/plugin/${t.project_link}:${t.module_name}`,g=`https://github.com/${t.author}`,b=`${g}.png?size=80`;return n.createElement("div",{className:(0,r.Z)("resource-card-container",u)},n.createElement("div",{className:"resource-card-header"},n.createElement("div",{className:"resource-card-header-title"},t.name,t.is_official&&n.createElement(c.G,{className:"resource-card-header-check",icon:["fas","circle-check"]})),n.createElement("div",{className:"resource-card-header-expand",onClick:a},n.createElement(c.G,{icon:["fas","expand"]}))),n.createElement("div",{className:"resource-card-desc"},t.desc),n.createElement("div",{className:"resource-card-footer"},n.createElement("div",{className:"resource-card-footer-tags"},t.tags.map(((e,t)=>n.createElement(o.Z,(0,l.Z)({className:"resource-card-footer-tag",key:t},e,{onClick:()=>i(e.label)}))))),n.createElement("div",{className:"divider resource-card-footer-divider"}),n.createElement("div",{className:"resource-card-footer-info"},n.createElement("div",{className:"resource-card-footer-group"},n.createElement(s.Z,{href:t.homepage},d?n.createElement(c.G,{className:"resource-card-footer-icon",icon:["fab","github"]}):n.createElement(c.G,{className:"resource-card-footer-icon",icon:["fas","link"]})),p&&n.createElement(s.Z,{href:f},n.createElement(c.G,{className:"resource-card-footer-icon",icon:["fas","cube"]}))),n.createElement("div",{className:"resource-card-footer-group"},n.createElement("div",{className:"avatar"},n.createElement("div",{className:"resource-card-footer-avatar"},n.createElement(s.Z,{href:g},n.createElement("img",{src:b,key:t.author})))),n.createElement("span",{className:"resource-card-footer-author",onClick:m},t.author)))))}},91857:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(27378),n=a(38944),r=a(37270);function s(e){let{label:t,color:a,className:s,onClick:c}=e;return l.createElement("span",{className:(0,n.Z)("resource-tag",s),style:{backgroundColor:a,color:(0,r.k)(a,"#fff","#000")},onClick:c},t)}},30442:(e,t,a)=>{a.d(t,{Z:()=>c});var l=a(27378),n=a(38944),r=a(99213),s=a(92739);function c(e){let{onChange:t,onSubmit:a,onBackspace:c,onClear:o,onTagClick:i,tags:m=[],className:u,placeholder:d,disabled:p=!1}=e;const f=(0,l.useRef)(null);return l.createElement("div",{className:(0,n.Z)("searcher-box",u)},l.createElement("div",{className:"searcher-container"},m.map(((e,t)=>l.createElement("div",{key:t,className:"badge badge-primary searcher-tag",onClick:()=>i(t)},e))),l.createElement("input",{ref:f,className:"searcher-input",placeholder:d??(0,r.I)({id:"theme.searcher.input.placeholder",description:"Search input placeholder",message:"\u641c\u7d22"}),onChange:e=>t(e.currentTarget.value),onKeyDown:e=>{switch(e.key){case"Enter":(e=>{a(e.currentTarget.value),e.currentTarget.value="",e.preventDefault()})(e);break;case"Escape":(e=>{e.currentTarget.value=""})(e);break;case"Backspace":(e=>{""===e.currentTarget.value&&(c(),e.preventDefault())})(e)}},disabled:p})),l.createElement("div",{className:"searcher-action",onClick:()=>{f.current&&(f.current.value="",f.current.focus()),o()}},l.createElement(s.G,{className:"searcher-action-icon search",icon:["fas","magnifying-glass"]}),l.createElement(s.G,{className:"searcher-action-icon close",icon:["fas","xmark"]})))}},28160:(e,t,a)=>{a.d(t,{Z:()=>f});var l=a(25773),n=a(27378),r=a(1123),s=a(45161),c=a(11384),o=a(22256),i=a(37582),m=a(6671),u=a(92784);const d="ecosystem";function p(e){let{title:t,children:a}=e;const l=(0,c.Uo)((0,s.lO)()[0].name,d);return n.createElement(u.Z,{hideTableOfContents:!0,reduceContentWidth:!1},n.createElement(o.uB,{items:l}),n.createElement("article",{className:"prose max-w-full"},n.createElement("h1",{className:"store-title"},t),a))}function f(e){let{title:t,...a}=e;return n.createElement(n.Fragment,null,n.createElement(r.d,{title:t}),n.createElement(m.Z,null,n.createElement(i.Z,null),n.createElement(p,(0,l.Z)({title:t},a))))}},59015:(e,t,a)=>{a.d(t,{Z:()=>o});var l=a(25773),n=a(27378),r=a(38944),s=a(92739);function c(e){let{label:t,icon:a,choices:l,onSubmit:r}=e;const[c,o]=(0,n.useState)(""),i=l?.filter((e=>e.toLowerCase().includes(c.toLowerCase())))?.slice(0,5),m=e=>{"Enter"===e.key&&(r(e.currentTarget.innerText),e.preventDefault())};return n.createElement("div",{className:"dropdown"},n.createElement("label",{className:"btn btn-sm btn-outline btn-primary no-animation",tabIndex:0},n.createElement(s.G,{icon:a}),t),n.createElement("div",{className:"dropdown-content store-toolbar-dropdown"},n.createElement("input",{type:"text",placeholder:"\u641c\u7d22",value:c,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(i&&i.length>0?r(i[0]):null===l&&r(c),e.preventDefault())},className:"input input-sm input-bordered w-full"}),i&&n.createElement("ul",{className:"menu menu-sm"},i.map(((e,t)=>n.createElement("li",{key:t,onClick:()=>r(e),onKeyDown:m},n.createElement("a",{tabIndex:0},e)))))))}function o(e){let{filters:t,action:a,className:o}=e;return t&&t.length>0||a?n.createElement("div",{className:(0,r.Z)("store-toolbar",o)},t&&t.length>0&&n.createElement("div",{className:"store-toolbar-filters"},t.map(((e,t)=>n.createElement(c,(0,l.Z)({key:t},e))))),a&&n.createElement("div",{className:"store-toolbar-action"},n.createElement("button",{className:"btn btn-sm btn-primary no-animation",onClick:a.onClick},n.createElement(s.G,{icon:a.icon}),a.label))):null}},37270:(e,t,a)=>{function l(e,t,a){const l="#"===e.charAt(0)?e.substring(1,7):e;return.299*parseInt(l.substring(0,2),16)+.587*parseInt(l.substring(2,4),16)+.114*parseInt(l.substring(4,6),16)>186?a:t}a.d(t,{k:()=>l})},28927:(e,t,a)=>{a.d(t,{Ac:()=>s,IA:()=>c,RQ:()=>r,SY:()=>o});var l=a(27378),n=a(99213);const r=e=>({type:"tag",id:`tag-${e}`,displayName:(0,n.I)({id:"pages.store.filter.tagDisplayName",description:"The display name of tag filter",message:"\u6807\u7b7e: {tag}"},{tag:e}),filter:t=>t.tags.map((e=>e.label)).includes(e)}),s=e=>({type:"author",id:`author-${e}`,displayName:(0,n.I)({id:"pages.store.filter.authorDisplayName",description:"The display name of author filter",message:"\u4f5c\u8005: {author}"},{author:e}),filter:t=>t.author===e}),c=e=>({type:"query",id:`query-${e}`,displayName:e,filter:t=>{if(!e)return!0;const a=e.toLowerCase(),l="plugin"===t.resourceType&&(t.module_name?.toLowerCase().includes(a)||t.project_link?.toLowerCase().includes(a)),n=t.name.toLowerCase().includes(a)||t.desc.toLowerCase().includes(a)||t.author.toLowerCase().includes(a)||t.tags.filter((e=>e.label.toLowerCase().includes(a))).length>0;return l||n}});function o(e){const[t,a]=(0,l.useState)([]),n=(0,l.useCallback)((e=>{t.some((t=>t.id===e.id))||a((t=>[...t,e]))}),[t,a]),r=(0,l.useCallback)((e=>{a((t=>t.filter((t=>"string"==typeof e?t.id!==e:t!==e))))}),[a]),s=(0,l.useCallback)((()=>function(e,t){return e.filter((e=>t.every((t=>t.filter(e)))))}(e,t)),[e,t]);return{filters:t,addFilter:n,removeFilter:r,filteredResources:s()}}},75799:(e,t,a)=>{a.d(t,{r:()=>r});var l=a(27378),n=a(28927);function r(e){const[t,a]=(0,l.useState)(null),{filters:r,addFilter:s,removeFilter:c,filteredResources:o}=(0,n.SY)(e),[i,m]=(0,l.useState)([]);(0,l.useEffect)((()=>{m(r.filter((e=>!(t&&e===t))))}),[r,t]);const u=(0,l.useCallback)((e=>{if(""===e)return t&&c(t),void a(null);const l=(0,n.IA)(e);t?.id!==l.id&&(t&&c(t),a(l),s(l))}),[t,a,s,c]),d=(0,l.useCallback)((()=>{a(null)}),[a]),p=(0,l.useCallback)((()=>{c(i[i.length-1])}),[c,i]),f=(0,l.useCallback)((()=>{i.forEach((e=>c(e)))}),[c,i]),g=(0,l.useCallback)((e=>{c(i[e])}),[c,i]);return{filteredResources:o,searcherTags:i.map((e=>e.displayName)),addFilter:s,onSearchQueryChange:u,onSearchQuerySubmit:d,onSearchBackspace:p,onSearchClear:f,onSearchTagClick:g}}},62434:(e,t,a)=>{async function l(e){const t=await fetch(`https://registry.nonebot.dev/${e}s.json`).catch((t=>{throw new Error(`Failed to fetch ${e}s: ${t}`)}));if(!t.ok)throw new Error(`Failed to fetch ${e}s: ${t.status} ${t.statusText}`);return(await t.json()).map((t=>({...t,resourceType:e})))}a.d(t,{J:()=>n,q:()=>l});const n=(0,a(99213).I)({id:"pages.store.loadFailed.title",message:"\u52a0\u8f7d\u5931\u8d25",description:"Title to display when loading content failed"})},34338:(e,t,a)=>{a.d(t,{S:()=>n});var l=a(28927);function n(e){let{resources:t,addFilter:a}=e;return{filters:[{label:"\u4f5c\u8005",icon:["fas","user"],choices:Array.from(new Set(t.map((e=>e.author)))),onSubmit:e=>{a((0,l.Ac)(e))}},{label:"\u6807\u7b7e",icon:["fas","tag"],choices:Array.from(new Set(t.flatMap((e=>e.tags.map((e=>e.label)))))),onSubmit:e=>{a((0,l.RQ)(e))}}]}}},16914:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var l=a(27378),n=a(99213),r=a(22600),s=a(7817),c=a(22974);function o(){return l.createElement(c.l,{type:"bot",formItems:[{name:"\u57fa\u672c\u4fe1\u606f",items:[{type:"text",name:"name",labelText:"\u673a\u5668\u4eba\u540d\u79f0"},{type:"text",name:"description",labelText:"\u673a\u5668\u4eba\u63cf\u8ff0"},{type:"text",name:"homepage",labelText:"\u673a\u5668\u4eba\u9879\u76ee\u4ed3\u5e93/\u4e3b\u9875\u94fe\u63a5"}]},{name:"\u5176\u4ed6\u4fe1\u606f",items:[{type:"tag",name:"tags",labelText:"\u6807\u7b7e"}]}],handleSubmit:e=>{window.open(`https://github.com/nonebot/nonebot2/issues/new?${new URLSearchParams({assignees:"",labels:"Bot",projects:"",template:"bot_publish.yml",title:`Bot: ${e.name}`,...e})}`)}})}var i=a(69220),m=a(12440),u=a(44633),d=a(30442),p=a(59015),f=a(28927),g=a(75799),b=a(62434),h=a(34338);function E(){const[e,t]=(0,l.useState)(null),a=e?.length??0,c=null===e,[E,N]=(0,l.useState)(null),[v,k]=(0,l.useState)(!1),{filteredResources:C,searcherTags:y,addFilter:w,onSearchQueryChange:x,onSearchQuerySubmit:S,onSearchBackspace:Z,onSearchClear:T,onSearchTagClick:P}=(0,g.r)(e??[]),I=C.length,{startIndex:F,endIndex:$,totalPages:A,currentPage:G,setNextPage:B,setPreviousPage:L,setPage:R,previousEnabled:D,nextEnabled:Q}=(0,r.h0)({totalItems:C.length,initialPageSize:12}),j=C.slice(F,$+1);(0,l.useEffect)((()=>{(0,b.q)("bot").then(t).catch((e=>{N(e),console.error(e)}))}),[]);const{filters:q}=(0,h.S)({resources:e??[],addFilter:w}),_={label:"\u53d1\u5e03\u673a\u5668\u4eba",icon:["fas","plus"],onClick:()=>{k(!0)}},O=(0,l.useCallback)((e=>{w((0,f.RQ)(e))}),[w]),M=(0,l.useCallback)((e=>{w((0,f.Ac)(e))}),[w]);return l.createElement(l.Fragment,null,l.createElement("p",{className:"store-description"},a===I?l.createElement(n.Z,{id:"pages.store.bot.info",description:"Bots info of the bot store page",values:{botCount:a}},"\u5f53\u524d\u5171\u6709 {botCount} \u4e2a\u673a\u5668\u4eba"):l.createElement(n.Z,{id:"pages.store.bot.searchInfo",description:"Bots search info of the bot store page",values:{botCount:a,filteredBotCount:I}},"\u5f53\u524d\u5171\u6709 {filteredBotCount} / {botCount} \u4e2a\u673a\u5668\u4eba")),l.createElement(d.Z,{className:"store-searcher not-prose",onChange:x,onSubmit:S,onBackspace:Z,onClear:T,onTagClick:P,tags:y,disabled:c}),l.createElement(p.Z,{className:"not-prose",filters:q,action:_}),E?l.createElement(s.Z,{type:"caution",title:b.J},E.message):c?l.createElement("p",{className:"store-loading-container"},l.createElement("span",{className:"loading loading-dots loading-lg store-loading"})):l.createElement("div",{className:"store-container"},j.map(((e,t)=>l.createElement(u.Z,{key:t,className:"not-prose",resource:e,onTagClick:O,onAuthorClick:()=>M(e.author)})))),l.createElement(m.Z,{className:"not-prose",totalPages:A,currentPage:G,setNextPage:B,setPreviousPage:L,setPage:R,nextEnabled:Q,previousEnabled:D}),v&&l.createElement(i.Z,{className:"not-prose",title:"\u53d1\u5e03\u673a\u5668\u4eba",setOpenModal:k},l.createElement(o,null)))}var N=a(28160);function v(){const e=(0,n.I)({id:"pages.store.bot.title",message:"\u673a\u5668\u4eba\u5546\u5e97",description:"Title for the bot store page"});return l.createElement(N.Z,{title:e},l.createElement(E,null))}}}]);