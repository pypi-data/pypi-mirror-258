<?xml version='1.0' encoding='UTF-8'?>
<!-- Created with Cambalache 0.16.0 -->
<!-- Danial Behzadi <dani.behzi@ubuntu.com>, 2022-2023 -->
<interface domain="carburetor">
  <!-- interface-name preferences.ui -->
  <!-- interface-description This file is part of Carburetor. -->
  <!-- interface-copyright Carburetor is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Carburetor is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Carburetor.  If not, see <http://www.gnu.org/licenses/>. -->
  <!-- interface-authors Danial Behzadi <dani.behzi@ubuntu.com> -->
  <requires lib="gtk" version="4.12"/>
  <requires lib="libadwaita" version="1.4"/>
  <object class="AdwPreferencesWindow" id="PreferencesWindow">
    <property name="hide-on-close">True</property>
    <property name="modal">True</property>
    <child>
      <object class="AdwPreferencesPage" id="GeneralPreferencesPage">
        <property name="icon-name">applications-system-symbolic</property>
        <property name="title" translatable="yes" context="PreferencesPage title">General</property>
        <child>
          <object class="AdwPreferencesGroup" id="ExitNodeGroup">
            <property name="title" translatable="yes" context="PreferencesGroup title">Exit Node</property>
            <child>
              <object class="AdwComboRow">
                <property name="factory">ExitNodeFactory</property>
                <property name="subtitle" translatable="yes">The country you want to connect from</property>
                <property name="title" translatable="yes">Exit Country</property>
                <signal name="realize" handler="on_exitcountry_realize"/>
                <signal name="notify::selected-item" handler="on_exitcountry_change"/>
              </object>
            </child>
          </object>
        </child>
        <child>
          <object class="AdwPreferencesGroup" id="AcceptConnectionGroup">
            <property name="title" translatable="yes" context="PreferencesGroup title">Accept Connections</property>
            <child>
              <object class="AdwSwitchRow">
                <property name="title" translatable="yes">Allow external devices to use this network</property>
                <signal name="realize" handler="on_actionacceptconnection_realize"/>
              </object>
            </child>
          </object>
        </child>
      </object>
    </child>
    <child>
      <object class="AdwPreferencesPage" id="PortsPreferencesPage">
        <property name="icon-name">network-server-symbolic</property>
        <property name="title" translatable="yes" context="PreferencesPage title">Ports</property>
        <child>
          <object class="AdwPreferencesGroup" id="SocksGroup">
            <property name="title" translatable="yes" context="PreferencesGroup title">Socks Port</property>
            <child>
              <object class="AdwSpinRow">
                <property name="adjustment">SocksPortAdjustment</property>
                <property name="title" translatable="yes">Local port on which Tractor would be listen</property>
                <signal name="realize" handler="on_actionsocksport_realize"/>
              </object>
            </child>
          </object>
        </child>
        <child>
          <object class="AdwPreferencesGroup" id="DNSGroup">
            <property name="title" translatable="yes" context="PreferencesGroup title">DNS Port</property>
            <child>
              <object class="AdwSpinRow">
                <property name="adjustment">DNSPortAdjustment</property>
                <property name="title" translatable="yes">Local port on which you would have an anonymous name server</property>
                <signal name="realize" handler="on_actiondnsport_realize"/>
              </object>
            </child>
          </object>
        </child>
        <child>
          <object class="AdwPreferencesGroup" id="HTTPGroup">
            <property name="title" translatable="yes" context="PreferencesGroup title">HTTP Port</property>
            <child>
              <object class="AdwSpinRow">
                <property name="adjustment">HTTPPortAdjustment</property>
                <property name="title" translatable="yes">Local port on which a HTTP tunnel would be listen</property>
                <signal name="realize" handler="on_actionhttpport_realize"/>
              </object>
            </child>
          </object>
        </child>
      </object>
    </child>
    <child>
      <object class="AdwPreferencesPage" id="BridgesPreferencesPage">
        <property name="icon-name">network-wired-no-route-symbolic</property>
        <property name="title" translatable="yes" context="PreferencesPage title">Bridges</property>
        <child>
          <object class="AdwPreferencesGroup" id="BridgeTypeGroup">
            <property name="title" translatable="yes" context="PreferencesGroup title">Pluggable transports</property>
            <child>
              <object class="AdwComboRow" id="BridgeTypeCombo">
                <property name="factory">BridgeTypeFactory</property>
                <property name="title" translatable="yes">Type of transport</property>
                <signal name="realize" handler="on_bridgetypecombo_realize"/>
                <signal name="notify::selected-item" handler="on_bridgetype_change"/>
              </object>
            </child>
            <child>
              <object class="AdwActionRow" id="PluginRow">
                <property name="title" translatable="yes">Transport excutable</property>
                <signal name="realize" handler="on_pluginrow_realize"/>
                <child>
                  <object class="GtkButton" id="PluginButton">
                    <property name="icon-name">document-open-symbolic</property>
                    <property name="label" translatable="yes">None</property>
                    <property name="valign">center</property>
                    <signal name="clicked" handler="on_pluginbutton_clicked"/>
                    <signal name="realize" handler="on_pluginbutton_realize"/>
                  </object>
                </child>
              </object>
            </child>
          </object>
        </child>
        <child>
          <object class="AdwPreferencesGroup" id="BridgesGroups">
            <property name="description" translatable="yes">Please copy and paste the bridges you have in the area below.</property>
            <property name="header-suffix">
              <object class="GtkMenuButton">
                <property name="has-frame">False</property>
                <property name="icon-name">help-about-symbolic</property>
                <property name="popover">
                  <object class="GtkPopover">
                    <property name="child">
                      <object class="GtkLabel">
                        <property name="label" translatable="yes">To Get bridges, you have these options:

• Visit the Tor website: &lt;a href="https://bridges.torproject.org/options/"&gt;https://bridges.torproject.org/options&lt;/a&gt;
• Use the Tor bridges Telegram bot: &lt;a href="https://t.me/GetBridgesBot"&gt;Tor bridges Telegram bot&lt;/a&gt;
• Send an email from a Riseup or Gmail address to: &lt;a href="mailto:bridges@torproject.org?body=get bridges"&gt;bridges@torproject.org&lt;/a&gt;</property>
                        <property name="use-markup">True</property>
                      </object>
                    </property>
                  </object>
                </property>
                <property name="valign">baseline-center</property>
              </object>
            </property>
            <property name="title" translatable="yes" context="PreferencesGroup title">Bridges</property>
            <child>
              <object class="AdwPreferencesRow">
                <child>
                  <object class="GtkBox">
                    <property name="css-classes">bridgeslist</property>
                    <property name="orientation">vertical</property>
                    <child>
                      <object class="GtkScrolledWindow">
                        <property name="vexpand">True</property>
                        <child>
                          <object class="GtkTextView" id="BridgesTextView">
                            <property name="accepts-tab">False</property>
                            <property name="css-classes">bridgeslist</property>
                            <property name="input-hints">no-emoji | no-spellcheck</property>
                            <signal name="realize" handler="on_bridgetextview_realize"/>
                          </object>
                        </child>
                      </object>
                    </child>
                    <child>
                      <object class="GtkButton" id="SaveButton">
                        <property name="action-name">app.save</property>
                        <property name="label" translatable="yes">_Save</property>
                        <property name="tooltip-text" translatable="yes">Save Bridges as a file in your local configs</property>
                        <property name="use-underline">True</property>
                      </object>
                    </child>
                  </object>
                </child>
              </object>
            </child>
          </object>
        </child>
      </object>
    </child>
  </object>
  <object class="GtkSignalListItemFactory" id="ExitNodeFactory">
    <signal name="setup" handler="on_factory_setup"/>
    <signal name="bind" handler="on_factory_bind"/>
  </object>
  <object class="GtkAdjustment" id="SocksPortAdjustment">
    <property name="lower">1.0</property>
    <property name="step-increment">1.0</property>
    <property name="upper">65535.0</property>
  </object>
  <object class="GtkAdjustment" id="DNSPortAdjustment">
    <property name="lower">1.0</property>
    <property name="step-increment">1.0</property>
    <property name="upper">65535.0</property>
  </object>
  <object class="GtkAdjustment" id="HTTPPortAdjustment">
    <property name="lower">1.0</property>
    <property name="step-increment">1.0</property>
    <property name="upper">65535.0</property>
  </object>
  <object class="GtkSignalListItemFactory" id="BridgeTypeFactory">
    <signal name="setup" handler="on_bt_factory_setup"/>
    <signal name="bind" handler="on_bt_factory_bind"/>
  </object>
  <object class="AdwMessageDialog" id="BridgErrorDialog">
    <property name="body">Please check the bridges to match the selected pluggable transport type.</property>
    <property name="heading">No relevant bridges Found</property>
    <property name="hide-on-close">True</property>
    <property name="modal">True</property>
    <property name="transient-for">PreferencesWindow</property>
    <signal name="realize" handler="on_dialog_realize"/>
  </object>
  <object class="GtkFileDialog" id="PluginChooser"/>
</interface>
