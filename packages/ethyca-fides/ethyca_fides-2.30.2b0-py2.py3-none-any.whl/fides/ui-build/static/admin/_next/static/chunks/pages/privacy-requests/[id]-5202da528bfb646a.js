(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9650],{40240:function(e,n,t){"use strict";t.d(n,{$R:function(){return j},Td:function(){return b},Th:function(){return v},Tr:function(){return y},hr:function(){return m},iA:function(){return f},p3:function(){return g},xJ:function(){return x}});var r=t(32393),i=t(14007),o=t(27378);function s(){return s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},s.apply(this,arguments)}function c(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}var l=["overflow","overflowX","className"],a=["className"],u=["placement"],d=["isNumeric"],h=["isNumeric"],x=(0,r.Gp)((function(e,n){var t,a=e.overflow,u=e.overflowX,d=e.className,h=c(e,l);return o.createElement(r.m$.div,s({ref:n,className:(0,i.cx)("chakra-table__container",d)},h,{__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:null!=(t=null!=a?a:u)?t:"auto",overflowY:"hidden",maxWidth:"100%"}}))})),f=(0,r.Gp)((function(e,n){var t=(0,r.jC)("Table",e),l=(0,r.Lr)(e),u=l.className,d=c(l,a);return o.createElement(r.Fo,{value:t},o.createElement(r.m$.table,s({role:"table",ref:n,__css:t.table,className:(0,i.cx)("chakra-table",u)},d)))}));i.Ts&&(f.displayName="Table");var p=(0,r.Gp)((function(e,n){var t=e.placement,i=void 0===t?"bottom":t,l=c(e,u),a=(0,r.yK)();return o.createElement(r.m$.caption,s({},l,{ref:n,__css:s({},a.caption,{captionSide:i})}))}));i.Ts&&(p.displayName="TableCaption");var m=(0,r.Gp)((function(e,n){var t=(0,r.yK)();return o.createElement(r.m$.thead,s({},e,{ref:n,__css:t.thead}))})),g=(0,r.Gp)((function(e,n){var t=(0,r.yK)();return o.createElement(r.m$.tbody,s({},e,{ref:n,__css:t.tbody}))})),j=(0,r.Gp)((function(e,n){var t=(0,r.yK)();return o.createElement(r.m$.tfoot,s({},e,{ref:n,__css:t.tfoot}))})),v=(0,r.Gp)((function(e,n){var t=e.isNumeric,i=c(e,d),l=(0,r.yK)();return o.createElement(r.m$.th,s({},i,{ref:n,__css:l.th,"data-is-numeric":t}))})),y=(0,r.Gp)((function(e,n){var t=(0,r.yK)();return o.createElement(r.m$.tr,s({role:"row"},e,{ref:n,__css:t.tr}))})),b=(0,r.Gp)((function(e,n){var t=e.isNumeric,i=c(e,h),l=(0,r.yK)();return o.createElement(r.m$.td,s({role:"gridcell"},i,{ref:n,__css:l.td,"data-is-numeric":t}))}))},30794:function(e,n,t){"use strict";t.d(n,{SD:function(){return f},Sn:function(){return u},Vp:function(){return a}});var r=t(13018),i=t(32393),o=t(14007),s=t(27378);function c(){return c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c.apply(this,arguments)}var l=["isDisabled","children"],a=(0,i.Gp)((function(e,n){var t=(0,i.jC)("Tag",e),r=(0,i.Lr)(e),o=c({display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%"},t.container);return s.createElement(i.Fo,{value:t},s.createElement(i.m$.span,c({ref:n},r,{__css:o})))}));o.Ts&&(a.displayName="Tag");var u=(0,i.Gp)((function(e,n){var t=(0,i.yK)();return s.createElement(i.m$.span,c({ref:n,isTruncated:!0},e,{__css:t.label}))}));o.Ts&&(u.displayName="TagLabel");var d=(0,i.Gp)((function(e,n){return s.createElement(r.JO,c({ref:n,verticalAlign:"top",marginEnd:"0.5rem"},e))}));o.Ts&&(d.displayName="TagLeftIcon");var h=(0,i.Gp)((function(e,n){return s.createElement(r.JO,c({ref:n,verticalAlign:"top",marginStart:"0.5rem"},e))}));o.Ts&&(h.displayName="TagRightIcon");var x=function(e){return s.createElement(r.JO,c({verticalAlign:"inherit",viewBox:"0 0 512 512"},e),s.createElement("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}))};o.Ts&&(x.displayName="TagCloseIcon");var f=function(e){var n=e.isDisabled,t=e.children,r=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,l),o=c({display:"flex",alignItems:"center",justifyContent:"center",outline:"0"},(0,i.yK)().closeButton);return s.createElement(i.m$.button,c({"aria-label":"close"},r,{type:"button",disabled:n,__css:o}),t||s.createElement(x,null))};o.Ts&&(f.displayName="TagCloseButton")},56602:function(e,n,t){"use strict";var r,i=t(21084),o=t(9992),s=t(29549),c=t(27378),l=t(91728),a=t(24246);!function(e){e.COPY="Copy",e.COPIED="Copied!"}(r||(r={}));n.Z=function(e){var n=function(e){var n=(0,i.VP)(e).onCopy,t=(0,c.useState)(!1),o=t[0],s=t[1],l=(0,c.useState)(r.COPY),a=l[0],u=l[1];return{tooltipText:a,highlighted:o,handleMouseDown:function(){u(r.COPIED),n()},handleMouseUp:function(){s(!1)},handleMouseEnter:function(){s(!0)},handleMouseLeave:function(){s(!1)},setTooltipText:u}}(e.copyText),t=n.tooltipText,u=n.highlighted,d=n.handleMouseDown,h=n.handleMouseUp,x=n.handleMouseEnter,f=n.handleMouseLeave,p=n.setTooltipText,m=u?"complimentary.500":"gray.600";return(0,a.jsx)(o.u,{label:t,placement:"top",closeDelay:500,onOpen:function(){p(r.COPY)},onClose:function(){p(r.COPY)},children:(0,a.jsx)(s.hU,{icon:(0,a.jsx)(l.TI,{}),color:m,onClick:d,onMouseUp:h,onMouseEnter:x,onMouseLeave:f,"aria-label":"copy",variant:"ghost","data-testid":"clipboard-btn"})})}},56069:function(e,n,t){"use strict";var r=t(90849),i=t(90089),o=t(34896),s=t(29549),c=t(73452),l=t(79894),a=t.n(l),u=t(24246),d=["backPath"];function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.backPath,t=(0,i.Z)(e,d);return(0,u.jsxs)(o.kC,x(x({alignItems:"center",mt:-4,mb:3},t),{},{children:[(0,u.jsx)(a(),{href:n,passHref:!0,children:(0,u.jsx)(s.hU,{"aria-label":"Back",icon:(0,u.jsx)(c.Rp,{}),mr:2,size:"xs",variant:"outline"})}),(0,u.jsx)(a(),{href:n,passHref:!0,children:(0,u.jsx)(o.xv,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})})]}))}},29083:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ae}});var r=t(34896),i=t(83125),o=t(86677),s=t(51471),c=t(56069),l=t(60709),a=t(89403),u=t(27378),d=t(5008),h=t(20324),x=t(24246),f=function(e){var n={};return e.forEach((function(e){var t=e.collection_name,r=e.updated_at;(!n[t]||new Date(n[t].updated_at)<new Date(r))&&(n[t]=e)})),Object.values(n).some((function(e){return e.status===h.np.ERROR}))},p=function(e){var n=e.subjectRequest,t=e.setEventDetails,i=n.results,o=i?Object.keys(i):[],s=o.map((function(e,n){return(0,x.jsxs)(r.xu,{children:[(0,x.jsxs)(r.kC,{alignItems:"center",height:23,position:"relative",children:[(0,x.jsx)(r.xu,{zIndex:1,children:f(i[e])?(0,x.jsx)(d.f9,{}):(0,x.jsx)(d.St,{})}),n===o.length-1?null:(0,x.jsx)(r.xu,{width:"2px",height:"63px",backgroundColor:"gray.700",position:"absolute",top:"16px",left:"6px",zIndex:0}),(0,x.jsx)(r.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",ml:2,children:e})]}),(0,x.jsx)(r.xv,{cursor:"pointer",color:"complimentary.500",fontWeight:"500",fontSize:"sm",ml:6,mb:7,onClick:function(){t({key:e,logs:i[e]})},children:"View Details"})]},e)}));return(0,x.jsxs)(r.xu,{width:"100%",children:[(0,x.jsx)(r.xv,{color:"gray.900",fontSize:"md",fontWeight:"500",mb:1,children:"Activity timeline"}),s]})},m=t(21084),g=t(60530),j=t(29549),v=t(73452),y=t(30794),b=t(56602),O=function(e){var n=e.errorMessage;return(0,x.jsxs)(r.xu,{height:"100%",id:"outer",children:[(0,x.jsxs)(r.kC,{alignItems:"center",paddingBottom:"8px",children:[(0,x.jsx)(r.xv,{size:"sm",color:"gray.700",fontWeight:"medium",marginRight:"8px",lineHeight:"20px",children:"Status"}),(0,x.jsx)(y.Vp,{size:"sm",height:"20px",backgroundColor:"red.500",color:"white",marginRight:"8px",children:"Error"}),(0,x.jsx)(r.xu,{padding:"0px",marginBottom:"3px",children:(0,x.jsx)(b.Z,{copyText:n})})]}),(0,x.jsx)(r.iz,{}),(0,x.jsx)(r.xu,{id:"errorWrapper",overflow:"auto",height:"100%",children:(0,x.jsx)(r.xv,{children:n})})]})},S=t(40240),k=t(1326),w=t(9481),C=function(e){var n=e.eventLogs,t=e.openErrorPanel,i=null===n||void 0===n?void 0:n.map((function(e){return(0,x.jsxs)(S.Tr,{_hover:{backgroundColor:e.status===w.n.ERROR?"#F7FAFC":"unset"},onClick:function(){e.status===w.n.ERROR&&t(e.message)},style:{cursor:e.status===w.n.ERROR?"pointer":"unset"},children:[(0,x.jsx)(S.Td,{children:(0,x.jsx)(r.xv,{color:"gray.600",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:(0,k.p6)(e.updated_at)})}),(0,x.jsx)(S.Td,{children:(0,x.jsx)(r.xv,{color:"gray.600",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:e.status})}),(0,x.jsx)(S.Td,{children:(0,x.jsx)(r.xv,{color:"gray.600",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:e.collection_name})})]},e.updated_at)}));return(0,x.jsx)(r.xu,{width:"100%",paddingTop:"0px",height:"100%",children:(0,x.jsx)(S.xJ,{id:"tableContainer",height:"100%",style:{overflowY:"auto"},children:(0,x.jsxs)(S.iA,{size:"sm",id:"table",position:"relative",children:[(0,x.jsx)(S.hr,{id:"tableHeader",position:"sticky",top:"0px",backgroundColor:"white",children:(0,x.jsxs)(S.Tr,{children:[(0,x.jsx)(S.Th,{children:(0,x.jsx)(r.xv,{color:"black",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:"Time"})}),(0,x.jsx)(S.Th,{children:(0,x.jsx)(r.xv,{color:"black",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:"Status"})}),(0,x.jsx)(S.Th,{children:(0,x.jsx)(r.xv,{color:"black",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:"Collection"})})]})}),(0,x.jsx)(S.p3,{id:"tabelBody",children:i})]})})})},_=function(e){var n=e.eventData,t=(0,m.qY)(),i=t.isOpen,o=t.onOpen,s=t.onClose,c=(0,u.useState)(!1),l=c[0],a=c[1],h=(0,u.useState)(""),f=h[0],p=h[1],y=function(){a(!1)},b=function(){l&&y(),s()},S=l?"Event detail":"Event log";return void 0===n?null:(0,x.jsxs)(r.xu,{width:"100%",paddingTop:"0px",height:"100%",children:[(0,x.jsx)(r.xv,{color:"gray.900",fontSize:"md",fontWeight:"500",mb:1,children:"Event Details"}),(0,x.jsx)(r.xv,{color:"gray.600",fontSize:"sm",fontWeight:"500",lineHeight:"20px",mb:1,children:n.key}),(0,x.jsx)(r.iz,{}),(0,x.jsx)(r.xv,{cursor:"pointer",color:"complimentary.500",fontWeight:"500",fontSize:"sm",onClick:function(){o()},children:"View Log"}),(0,x.jsxs)(g.dy,{isOpen:i,placement:"right",onClose:b,size:"full",autoFocus:!1,children:[(0,x.jsx)(g.P1,{}),(0,x.jsxs)(g.sc,{style:{width:"50%"},children:[(0,x.jsx)(g.OX,{style:{paddingBottom:"0px"},children:(0,x.jsxs)(r.kC,{justifyContent:"space-between",alignItems:"center",height:"40px",children:[(0,x.jsxs)(r.kC,{alignItems:"center",children:[l?(0,x.jsx)(j.hU,{icon:(0,x.jsx)(v.Rp,{}),"aria-label":"Close error logs",size:"sm",style:{height:"24px",width:"24px",minWidth:"24px",marginRight:"8px"},onClick:y}):null,(0,x.jsx)(r.xv,{color:"gray.900",fontSize:"md",lineHeight:"6",fontWeight:"medium",children:S})]}),(0,x.jsx)(r.kC,{alignItems:"flex-start",height:"100%",children:(0,x.jsx)(j.hU,{icon:(0,x.jsx)(d.LG,{width:"17px"}),"aria-label":"Stop viewing error message",variant:"unstyled",size:"sm",style:{height:"24px",width:"24px",minWidth:"14px",backgroundColor:"#00000000"},isRound:!0,onClick:b})})]})}),(0,x.jsxs)(g.Ng,{id:"drawerBody",overflow:"hidden",children:[n&&!l?(0,x.jsx)(C,{eventLogs:n.logs,openErrorPanel:function(e){p(e),a(!0)}}):null,l?(0,x.jsx)(O,{errorMessage:f}):null]})]})]})]})},z=function(e){var n=e.subjectRequest,t=(0,u.useState)(),i=t[0],o=t[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r.X6,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mb:4,children:"Events and logs"}),(0,x.jsx)(r.iz,{}),(0,x.jsxs)(r.kC,{mt:3,children:[(0,x.jsx)(p,{subjectRequest:n,setEventDetails:o}),(0,x.jsx)(_,{eventData:i})]})]})},E=t(90849),P=t(55732),T=t(97865),R=t(34707),W=t.n(R),I=t(9408),D=t(57928),q=t(51365),Z=t(6848),N=t(1540),M=t(92975),U=t(32751),A=t(34090),F=t(68301);function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function $(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(Object(t),!0).forEach((function(n){(0,E.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var X=function(e){var n=e.connectorName,t=e.data,i=e.isSubmitting,o=void 0!==i&&i,s=e.onSaveClick,c=(0,m.qY)(),l=c.isOpen,a=c.onOpen,d=c.onClose,h=(0,u.useRef)(null),f=function(){var e=(0,P.Z)(W().mark((function e(n,r){var i;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={connection_key:t.connection_key,privacy_request_id:t.privacy_request_id,body:$({},n)},s(i),d();case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(null===t||void 0===t?void 0:t.checked)&&(0,x.jsx)(j.zx,{color:"gray.700",fontSize:"xs",h:"24px",onClick:a,variant:"outline",w:"58px",children:"Review"}),!(null!==t&&void 0!==t&&t.checked)&&(0,x.jsx)(j.zx,{color:"white",bg:"primary.800",fontSize:"xs",h:"24px",onClick:a,w:"127px",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Begin manual input"}),(0,x.jsx)(A.J9,{enableReinitialize:!0,initialValues:$({},t.fields),onSubmit:f,validateOnBlur:!1,validateOnChange:!1,validationSchema:F.Ry().shape({}),children:function(e){return(0,x.jsxs)(g.dy,{isOpen:l,placement:"right",initialFocusRef:h,onClose:d,size:"lg",children:[(0,x.jsx)(g.P1,{}),(0,x.jsxs)(g.sc,{children:[(0,x.jsx)(g.cC,{}),(0,x.jsxs)(g.OX,{color:"gray.900",children:[(0,x.jsx)(r.xv,{fontSize:"xl",mb:8,children:n}),(0,x.jsx)(r.iz,{}),(0,x.jsx)(r.xv,{fontSize:"md",mt:"4",children:"Manual access"}),(0,x.jsx)(r.xu,{mt:"8px",children:(0,x.jsx)(r.xv,{color:"gray.700",fontSize:"sm",fontWeight:"normal",children:"Please complete the following PII fields that have been collected for the selected subject."})})]}),(0,x.jsx)(g.Ng,{children:(0,x.jsx)(A.l0,{id:"manual-detail-form",noValidate:!0,children:(0,x.jsx)(r.gC,{align:"stretch",gap:"16px",children:Object.entries(t.fields).map((function(e,n){var t=(0,T.Z)(e,1)[0];return(0,x.jsx)(r.Ug,{children:(0,x.jsx)(A.gN,{id:t,name:t,children:function(e){var r=e.field;return(0,x.jsxs)(M.NI,{alignItems:"baseline",display:"inline-flex",children:[(0,x.jsx)(M.lX,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:t,w:"50%",children:t}),(0,x.jsx)(U.II,$($({},r),{},{autoComplete:"off",color:"gray.700",placeholder:"Please enter ".concat(t),ref:0===n?h:void 0,size:"sm"}))]})}})},t)}))})})}),(0,x.jsx)(g.ze,{justifyContent:"flex-start",children:(0,x.jsxs)(j.hE,{size:"sm",spacing:"8px",variant:"outline",children:[(0,x.jsx)(j.zx,{onClick:d,variant:"outline",children:"Cancel"}),(0,x.jsx)(j.zx,{bg:"primary.800",color:"white",form:"manual-detail-form",isLoading:o,loadingText:"Submitting",size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_hover:{bg:"primary.400"},children:"Save"})]})})]})]})}})]})},V=t(77751);function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function G(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?B(Object(t),!0).forEach((function(n){(0,E.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var H=function(e){var n=e.connectorName,t=e.data,i=e.isSubmitting,o=void 0!==i&&i,s=e.onSaveClick,c=(0,m.qY)(),l=c.isOpen,a=c.onOpen,d=c.onClose,h=(0,u.useRef)(null),f=function(){var e=(0,P.Z)(W().mark((function e(n,r){var i;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={connection_key:t.connection_key,privacy_request_id:t.privacy_request_id,body:G({},n)},s(i),d();case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(null===t||void 0===t?void 0:t.checked)&&(0,x.jsx)(j.zx,{color:"gray.700",fontSize:"xs",h:"24px",onClick:a,variant:"outline",w:"58px",children:"Review"}),!(null!==t&&void 0!==t&&t.checked)&&(0,x.jsx)(j.zx,{color:"white",bg:"primary.800",fontSize:"xs",h:"24px",onClick:a,w:"127px",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Begin manual input"}),(0,x.jsx)(A.J9,{enableReinitialize:!0,initialValues:G({},t.fields),onSubmit:f,validateOnBlur:!1,validateOnChange:!1,validationSchema:F.Ry().shape({}),children:function(e){return(0,x.jsxs)(g.dy,{isOpen:l,placement:"right",initialFocusRef:h,onClose:d,size:"lg",children:[(0,x.jsx)(g.P1,{}),(0,x.jsxs)(g.sc,{children:[(0,x.jsx)(g.cC,{}),(0,x.jsxs)(g.OX,{color:"gray.900",children:[(0,x.jsx)(r.xv,{fontSize:"xl",mb:8,children:n}),(0,x.jsx)(r.iz,{}),(0,x.jsx)(r.xv,{fontSize:"md",mt:"4",children:"Manual erasure"}),(0,x.jsx)(r.xu,{mt:"8px",children:(0,x.jsx)(r.xv,{color:"gray.700",fontSize:"sm",fontWeight:"normal",children:"Please delete the following PII fields associated with the selected subject if they are available. Once deleted, check the box to confirm the deletion."})})]}),(0,x.jsx)(g.Ng,{children:(0,x.jsx)(A.l0,{id:"manual-detail-form",noValidate:!0,children:(0,x.jsx)(r.gC,{align:"stretch",gap:"16px",children:Object.entries(t.fields).map((function(e){var n=(0,T.Z)(e,1)[0];return(0,x.jsx)(r.Ug,{children:(0,x.jsx)(A.gN,{id:n,name:n,children:function(e){var t=e.field;return(0,x.jsxs)(M.NI,{alignItems:"baseline",display:"inline-flex",children:[(0,x.jsx)(M.lX,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:n,w:"50%",children:n}),(0,x.jsx)(V.XZ,G(G({},t),{},{isChecked:!!t.value,onChange:t.onChange,name:n,id:n}))]})}})},n)}))})})}),(0,x.jsx)(g.ze,{justifyContent:"flex-start",children:(0,x.jsxs)(j.hE,{size:"sm",spacing:"8px",variant:"outline",children:[(0,x.jsx)(j.zx,{onClick:d,variant:"outline",children:"Cancel"}),(0,x.jsx)(j.zx,{bg:"primary.800",color:"white",form:"manual-detail-form",isLoading:o,loadingText:"Submitting",size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_hover:{bg:"primary.400"},children:"Save"})]})})]})]})}})]})};function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function K(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach((function(n){(0,E.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var J=function(e){var n,t,o,s=e.subjectRequest,c=(0,Z.T)(),l=(0,I.VY)(),a=l.errorAlert,d=l.successAlert,h=(0,I.HK)().handleError,f=(0,u.useState)([]),p=f[0],m=f[1],g=(0,u.useState)(!1),v=g[0],y=g[1],b=(0,u.useState)(!1),O=b[0],k=b[1],C=(0,D.W6)(),_=C.data,z=C.isFetching,E=C.isLoading,R=C.isSuccess,M=(0,q.w3)(),U=(0,T.Z)(M,1)[0],A=(0,N.E)(s.policy.rules),F=(0,q.nL)(),L=(0,T.Z)(F,1)[0],$=(0,q.UR)(),V=(0,T.Z)($,1)[0],B=(t=L,o=V,(n=A).includes(w.U.ACCESS)?{ProcessingDetailComponent:X,uploadMutation:t,getUploadedWebhookDataEndpoint:q.$I.endpoints.getUploadedManualAccessWebhookData}:n.includes(w.U.ERASURE)?{ProcessingDetailComponent:H,uploadMutation:o,getUploadedWebhookDataEndpoint:q.$I.endpoints.getUploadedManualErasureWebhookData}:null),G=B.ProcessingDetailComponent,Y=B.uploadMutation,J=B.getUploadedWebhookDataEndpoint,Q=function(){var e=(0,P.Z)(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,U(s.id).unwrap();case 4:d("Manual request has been received. Request now processing."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h(e.t0);case 10:return e.prev=10,y(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,P.Z)(W().mark((function e(n){var t,r;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,Y(n).unwrap();case 4:t={connection_key:n.connection_key,fields:{}},Object.entries(n.body).forEach((function(e){var n=(0,T.Z)(e,2),r=n[0],i=n[1];t.fields[r]=i||""})),r=p.map((function(e){return e.connection_key===t.connection_key?K(K({},e),{},{checked:!0,fields:K({},t.fields)}):e})),m(r),d("Manual input successfully saved!"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),h(e.t0);case 14:return e.prev=14,k(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(n){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){return R&&_.length>0&&0===p.length&&function(){if(!(p.length>0)){var e=[],n=null===_||void 0===_?void 0:_.map((function(e){return e.connection_config.key}));null===n||void 0===n||n.every((function(n){return e.push(c(J.initiate({connection_key:n,privacy_request_id:s.id})))})),Promise.allSettled(e).then((function(e){var n=[];e.forEach((function(e,t){if("fulfilled"===e.status&&e.value.isSuccess&&e.value.data){var r={checked:e.value.data.checked,fields:{},connection_key:e.value.originalArgs.connection_key,privacy_request_id:e.value.originalArgs.privacy_request_id};Object.entries(e.value.data.fields).forEach((function(e){var n=(0,T.Z)(e,2),t=n[0],i=n[1];r.fields[t]=i||""})),n.push(r)}else a("An error occurred while loading manual input data for ".concat(_[t].connection_config.name))})),m(n)}))}}(),function(){}}),[_,p.length,c,a,R,s.id,J]),A.includes(w.U.ACCESS)||A.includes(w.U.ERASURE)?(0,x.jsxs)(r.gC,{align:"stretch",spacing:8,children:[(0,x.jsxs)(r.xu,{children:[(0,x.jsx)(r.X6,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mb:4,children:"Manual Processing"}),(0,x.jsx)(r.iz,{})]}),(0,x.jsx)(r.xu,{children:(0,x.jsx)(r.xv,{color:"gray.700",fontSize:"sm",children:"The following table details the integrations that require manual input from you."})}),(0,x.jsxs)(r.xu,{children:[(z||E)&&(0,x.jsx)(r.M5,{children:(0,x.jsx)(i.$,{})}),R&&_?(0,x.jsx)(S.xJ,{children:(0,x.jsxs)(S.iA,{size:"sm",variant:"unstyled",children:[(0,x.jsx)(S.hr,{children:(0,x.jsxs)(S.Tr,{children:[(0,x.jsx)(S.Th,{fontSize:"sm",fontWeight:"semibold",pl:"0",textTransform:"none",children:"Integration Identifier"}),(0,x.jsx)(S.Th,{})]})}),(0,x.jsxs)(S.p3,{children:[_.length>0&&_.map((function(e){return(0,x.jsxs)(S.Tr,{display:"block",children:[(0,x.jsx)(S.Td,{pl:"0",children:e.connection_config.key}),(0,x.jsx)(S.Td,{children:p.length>0?(0,x.jsx)(G,{connectorName:e.connection_config.name,data:p.find((function(n){return n.connection_key===e.connection_config.key})),isSubmitting:O,onSaveClick:ee}):null})]},e.id)})),0===_.length&&(0,x.jsx)(S.Tr,{children:(0,x.jsx)(S.Td,{colSpan:3,pl:"0",children:(0,x.jsx)(r.M5,{children:(0,x.jsx)(r.xv,{children:"You don\u2018t have any Manual Process connections set up yet."})})})})]}),p.length>0&&p.every((function(e){return e.checked}))?(0,x.jsx)(S.$R,{children:(0,x.jsx)(S.Tr,{children:(0,x.jsx)(S.Th,{pl:"0px",children:(0,x.jsx)(j.zx,{color:"white",bg:"primary.800",fontSize:"xs",h:"24px",isLoading:v,loadingText:"Completing DSR",onClick:Q,w:"127px",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Complete DSR"})})})}):null]})}):null]})]}):null},Q=t(64860),ee=t(19099),ne=t(40377),te=t(20970),re=t(30199),ie=function(e){var n=e.subjectRequest,t=n.id,i=n.status,o=n.policy;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r.X6,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mb:4,children:"Request details"}),(0,x.jsx)(r.iz,{}),(0,x.jsxs)(r.kC,{alignItems:"center",children:[(0,x.jsx)(r.xv,{mt:4,mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Request ID:"}),(0,x.jsx)(r.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:1,children:t}),(0,x.jsx)(b.Z,{copyText:t})]}),(0,x.jsxs)(r.kC,{alignItems:"center",children:[(0,x.jsx)(r.xv,{mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Request type:"}),(0,x.jsx)(r.xu,{mr:1,mb:4,children:(0,x.jsx)(N.Z,{rules:o.rules})})]}),(0,x.jsxs)(r.kC,{children:[(0,x.jsx)(r.xv,{mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Policy key:"}),(0,x.jsx)(r.xu,{children:(0,x.jsx)(y.Vp,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:n.policy.key})})]}),(0,x.jsxs)(r.kC,{alignItems:"center",children:[(0,x.jsx)(r.xv,{mb:0,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Status:"}),(0,x.jsxs)(r.Ug,{spacing:"8px",children:[(0,x.jsx)(r.kC,{children:(0,x.jsx)(ee.Z,{status:i})}),(0,x.jsxs)(j.hE,{isAttached:!0,variant:"outline",borderRadius:"md",children:["error"===i&&(0,x.jsx)(re.Z,{buttonProps:{size:"xs"},subjectRequest:n}),"pending"===i&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(ne.Z,{subjectRequest:n,children:"Approve"}),(0,x.jsx)(te.Z,{subjectRequest:n,children:"Deny"})]})]}),(0,x.jsx)(Q.Z,{daysLeft:n.days_left,includeText:!0,status:n.status})]})]})]})},oe=t(13807),se=t(95946),ce=function(e){var n=e.subjectRequest,t=n.identity,i=n.identity_verified_at,o=n.custom_privacy_request_fields,s=(0,u.useState)(!1),c=s[0],l=s[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(r.kC,{direction:"row",justifyContent:"space-between",children:[(0,x.jsx)(r.X6,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mb:4,children:"Subject identities"}),(0,x.jsxs)(r.kC,{flexShrink:0,alignItems:"flex-start",children:[(0,x.jsx)(se.Z,{revealPII:c,onChange:l}),(0,x.jsx)(r.xv,{fontSize:"xs",ml:2,size:"sm",color:"gray.600",fontWeight:"500",children:"Reveal PII"})]})]}),(0,x.jsx)(r.iz,{}),t.email&&(0,x.jsxs)(r.kC,{alignItems:"center",children:[(0,x.jsx)(r.xv,{mt:4,mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Email:"}),(0,x.jsx)(r.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:(0,x.jsx)(oe.Z,{data:t.email?t.email:"",revealPII:c})}),(0,x.jsx)(y.Vp,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:i?"Verified":"Unverified"})]}),t.phone_number&&(0,x.jsxs)(r.kC,{alignItems:"flex-start",children:[(0,x.jsx)(r.xv,{mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Mobile:"}),(0,x.jsx)(r.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",children:(0,x.jsx)(oe.Z,{data:t.phone_number?t.phone_number:"",revealPII:c})}),(0,x.jsx)(y.Vp,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:i?"Verified":"Unverified"})]}),o&&Object.keys(o).length>0&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r.X6,{color:"gray.900",fontSize:"sm",fontWeight:"semibold",mb:4,children:"Custom privacy request fields"}),Object.entries(o).filter((function(e){return(0,T.Z)(e,2)[1].value})).map((function(e){var n=(0,T.Z)(e,2),t=n[0],i=n[1];return(0,x.jsxs)(r.kC,{alignItems:"flex-start",children:[(0,x.jsxs)(r.xv,{mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[i.label,":"]}),(0,x.jsx)(r.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:(0,x.jsx)(oe.Z,{data:i.value,revealPII:c})}),(0,x.jsx)(y.Vp,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:"Unverified"})]},t)}))]})]})},le=function(e){var n=e.data;return(0,x.jsxs)(r.gC,{align:"stretch",display:"flex-start",spacing:6,children:[(0,x.jsx)(r.xu,{"data-testid":"privacy-request-details",children:(0,x.jsx)(ie,{subjectRequest:n})}),(0,x.jsx)(r.xu,{children:(0,x.jsx)(ce,{subjectRequest:n})}),"requires_input"===n.status&&(0,x.jsx)(r.xu,{children:(0,x.jsx)(J,{subjectRequest:n})}),(0,x.jsx)(r.xu,{children:(0,x.jsx)(z,{subjectRequest:n})})]})},ae=function(){var e,n=(0,o.useRouter)().query.id,t=void 0===n?"":n,u=(0,a.QA)({id:Array.isArray(t)?t[0]:t,verbose:!0},{skip:""===t}),d=u.data,h=u.isLoading;return e=u.isUninitialized||h?(0,x.jsx)(r.M5,{children:(0,x.jsx)(i.$,{})}):d&&0!==(null===d||void 0===d?void 0:d.items.length)?(0,x.jsx)(le,{data:null===d||void 0===d?void 0:d.items[0]}):(0,x.jsx)(r.xv,{children:"404 no privacy request found"}),(0,x.jsxs)(s.Z,{title:"Privacy Requests - ".concat(t),children:[(0,x.jsx)(c.Z,{backPath:l.Jw}),(0,x.jsx)(r.X6,{fontSize:"2xl",fontWeight:"semibold",children:"Privacy Request"}),e]})}},6554:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests/[id]",function(){return t(29083)}])}},function(e){e.O(0,[7751,6842,530,3452,3453,8301,4400,1728,7451,9774,2888,179],(function(){return n=6554,e(e.s=n);var n}));var n=e.O();_N_E=n}]);