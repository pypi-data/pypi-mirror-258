import{b2 as v,d as h,S,b as g,F,aj as k,e as x,u as e,c as N,i as m,a as D,j as I,a1 as B,o as J,m as p,b3 as O,b4 as T,b5 as j,ae as d,b6 as P,b0 as i}from"./index-XIEYhGk-.js";import{u as U}from"./usePageTitle-ycsGJiPl.js";class V extends v{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const Q=h({__name:"FlowRunCreate",setup(f){const t=S(),n=g("deploymentId"),s=B(),y=F("parameters",V,void 0),{deployment:o}=k(n),_=async r=>{var l,a;try{const u=await t.deployments.createDeploymentFlowRun(n.value,r),c=((a=(l=r.state)==null?void 0:l.stateDetails)==null?void 0:a.scheduledTime)??void 0,b=!c,C=P(j,{flowRun:u,flowRunRoute:d.flowRun,router:s,immediate:b,startTime:c});i(C,"success"),s.push(d.deployment(n.value))}catch(u){i("Something went wrong trying to create a flow run","error"),console.error(u)}},w=()=>{s.back()},R=x(()=>o.value?`Create Flow Run for Deployment: ${o.value.name}`:"Create Flow Run for Deployment");return U(R),(r,l)=>{const a=I("p-layout-default");return e(o)?(J(),N(a,{key:0},{header:m(()=>[p(e(O),{deployment:e(o)},null,8,["deployment"])]),default:m(()=>[p(e(T),{deployment:e(o),parameters:e(y),onSubmit:_,onCancel:w},null,8,["deployment","parameters"])]),_:1})):D("",!0)}}});export{Q as default};
