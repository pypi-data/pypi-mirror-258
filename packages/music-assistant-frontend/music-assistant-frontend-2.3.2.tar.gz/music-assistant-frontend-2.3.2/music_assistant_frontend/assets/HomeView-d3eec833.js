import{v as L,o as Y,S as J,y as s,z as y,A as l,$ as Z,x as o,ak as w,K as E,l as d,B as _,E as n,R as k,N as r,I as D,M as X,ab as R,J as b,L as p,a2 as q,_ as x,r as ee,al as te,b as ie,F as P,G as V,D as Q,W}from"./index-4abadf84.js";import{_ as se}from"./PanelviewItem.vue_vue_type_style_index_0_lang-3d5ca720.js";import{i as ae,e as le}from"./contextmenu-c1d86d74.js";import{_ as ne,i as re,V as j}from"./VBadge-148f67ae.js";import{L as ue,a as oe,C as me}from"./Container-cc02c26a.js";import{j as de,k as C}from"./forwardRefs-7da7908a.js";import{V as ce}from"./VCard-63dfea61.js";import{V as H}from"./VToolbar-42c79991.js";import"./VTooltip-2600ff41.js";import"./VCheckboxBtn-c7727adb.js";import"./VSlideGroup-fc835928.js";import"./VMenu-5b409939.js";/* empty css              */import"./VCardText-a4be1fd3.js";const K=L({__name:"Carousel",setup(S){return Y(()=>{document.documentElement.style.setProperty("--swiper-navigation-color","primary")}),(e,f)=>{const u=J("swiper");return s(),y(u,{"slides-per-view":o(w)(e.$vuetify.display.width)+.5,"space-between":24,"free-mode":!0,navigation:!o(E)({breakpoint:"mobile"})},{default:l(()=>[Z(e.$slots,"default")]),_:3},8,["slides-per-view","navigation"])}}}),pe={class:"media-thumb player-media-thumb"},_e={style:{cursor:"pointer"}},ye={key:0},ve={key:0},he={key:1},fe={key:2},be={style:{cursor:"pointer"},class:"line-clamp-1"},qe={key:0},ke={key:1},Ce={key:2,class:"line-clamp-1"},$e={key:3,class:"line-clamp-1"},Pe={key:4,class:"line-clamp-1"},Ve={key:5,class:"line-clamp-1"},Ee={style:{cursor:"pointer"}},De={style:{cursor:"pointer",fontWeight:"bold"}},Le=L({__name:"PanelviewPlayerCard",props:{queue:{}},setup(S){return(e,f)=>(s(),y(ce,{class:x(["panel-item",{"panel-item-selected":o(b).selectedPlayerId==e.queue.queue_id,"panel-item-idle":e.queue.state==o(q).IDLE}])},{default:l(()=>[d(ue,{class:"panel-item-details"},{prepend:l(()=>{var u;return[_("div",pe,[d(ne,{size:"60",item:((u=e.queue.current_item)==null?void 0:u.media_item)||e.queue.current_item,fallback:o(re),style:{cursor:"pointer"}},null,8,["item","fallback"])])]}),title:l(()=>{var u,v,h,t,i,m;return[_("div",_e,[(u=e.queue.current_item)!=null&&u.media_item?(s(),n("div",ye,[k(r((v=e.queue.current_item)==null?void 0:v.media_item.name)+" ",1),"version"in((h=e.queue.current_item)==null?void 0:h.media_item)&&((t=e.queue.current_item)!=null&&t.media_item.version)?(s(),n("span",ve,"("+r((i=e.queue.current_item)==null?void 0:i.media_item.version)+")",1)):D("",!0)])):e.queue.current_item?(s(),n("div",he,r((m=e.queue.current_item)==null?void 0:m.name),1)):(s(),n("div",fe,r(e.queue.display_name),1))])]}),subtitle:l(()=>{var u,v,h,t,i,m,a,c,$,A,B,z,N,T,g,M,U,O,F,G,I;return[_("div",be,[(u=e.queue.current_item)!=null&&u.media_item&&((h=(v=e.queue.current_item)==null?void 0:v.media_item)==null?void 0:h.media_type)==o(X).TRACK&&"album"in((t=e.queue.current_item)==null?void 0:t.media_item)&&((i=e.queue.current_item)!=null&&i.media_item.album)?(s(),n("div",qe,r(o(R)((m=e.queue.current_item)==null?void 0:m.media_item.artists))+" â€¢ "+r((a=e.queue.current_item)==null?void 0:a.media_item.album.name),1)):(c=e.queue.current_item)!=null&&c.media_item&&"artists"in(($=e.queue.current_item)==null?void 0:$.media_item)&&((A=e.queue.current_item)==null?void 0:A.media_item.artists.length)>0?(s(),n("div",ke,r((B=e.queue.current_item)==null?void 0:B.media_item.artists[0].name),1)):(N=(z=e.queue.current_item)==null?void 0:z.streamdetails)!=null&&N.stream_title?(s(),n("div",Ce,r((g=(T=e.queue.current_item)==null?void 0:T.streamdetails)==null?void 0:g.stream_title),1)):(U=(M=e.queue.current_item)==null?void 0:M.media_item)!=null&&U.metadata.description?(s(),n("div",$e,r((O=e.queue.current_item)==null?void 0:O.media_item.metadata.description),1)):e.queue.items==0?(s(),n("div",Pe,r(e.$t("queue_empty")),1)):((F=o(b).selectedPlayer)==null?void 0:F.active_source)!=((G=o(b).selectedPlayer)==null?void 0:G.player_id)?(s(),n("div",Ve,r(e.$t("external_source_active",[(I=o(b).selectedPlayer)==null?void 0:I.active_source])),1)):D("",!0)])]}),default:l(()=>[_("div",Ee,[_("div",null,[k(" on "),_("span",De,r(e.queue.display_name),1)])])]),append:l(()=>[d(de,{icon:"",variant:"text",onClick:f[0]||(f[0]=u=>o(p).queueCommandPlayPause(e.queue.queue_id))},{default:l(()=>[e.queue.state==o(q).PLAYING?(s(),y(C,{key:0,size:o(E)({breakpoint:"phone"})?"24":"32"},{default:l(()=>[k("mdi-pause-circle-outline")]),_:1},8,["size"])):(s(),y(C,{key:1,size:o(E)({breakpoint:"phone"})?"24":"32"},{default:l(()=>[k("mdi-play-circle-outline")]),_:1},8,["size"]))]),_:1})]),_:1})]),_:1},8,["class"]))}});const Se=oe(Le,[["__scopeId","data-v-91231c3f"]]),Ae={key:0,class:"widget-row"},Be={class:"mr-3"},ze={key:1,class:"mr-3"},Ne={key:1,class:"widget-row"},Te={class:"mr-3"},ge={key:1,class:"mr-3"},Ze=L({__name:"HomeView",setup(S){const e=ee({queue:{label:"currently_playing",icon:"mdi-playlist-play",items:[]},recently_played:{label:"recently_played",icon:"mdi-motion-play",items:[]},artists:{label:"artists",icon:"mdi-account-music",path:"/artists",items:[]},albums:{label:"albums",icon:"mdi-album",path:"/albums",items:[]},playlists:{label:"playlists",icon:"mdi-playlist-music",path:"/playlists",items:[]},tracks:{label:"tracks",icon:"mdi-file-music",path:"/tracks",items:[]},radios:{label:"radios",icon:"mdi-radio",path:"/radios",items:[]},browse:{label:"browse",icon:"mdi-folder",path:"/browse",items:[]}});Y(async()=>{const t=p.subscribe(te.QUEUE_UPDATED,i=>{u()});ie(t),u(),p.getRecentlyPlayedItems(20).then(i=>{e.value.recently_played.items=i}),p.getLibraryArtists(void 0,void 0,20,void 0,"RANDOM()").then(i=>{e.value.artists.items=i.items,e.value.artists.count=i.total}),p.getLibraryAlbums(void 0,void 0,20,void 0,"timestamp_added DESC").then(i=>{e.value.albums.items=i.items,e.value.albums.count=i.total}),p.getLibraryPlaylists(void 0,void 0,20,void 0,"timestamp_added DESC").then(i=>{e.value.playlists.items=i.items,e.value.playlists.count=i.total}),p.getLibraryRadios(void 0,void 0,20,void 0,"timestamp_added DESC").then(i=>{e.value.radios.items=i.items,e.value.radios.count=i.total}),p.getLibraryTracks(void 0,void 0,20,void 0,"timestamp_added DESC").then(i=>{e.value.tracks.items=i.items,e.value.tracks.count=i.total}),await p.browse("",i=>{e.value.browse.items.push(...i)})});const f={[q.PLAYING]:1,[q.PAUSED]:2,[q.IDLE]:2},u=function(){for(const t of Object.values(p.queues))if(t.items>0&&t.active){if(e.value.queue.queues||(e.value.queue.queues=[]),e.value.queue.queues.some(i=>i.queue_id===t.queue_id))continue;e.value.queue.queues.push(t),console.log(t),e.value.queue.queues.sort((i,m)=>i.display_name.localeCompare(m.display_name)),e.value.queue.queues.sort((i,m)=>f[i.state]-f[m.state])}},v=function(t){ae(t)&&["artist","album","playlist"].includes(t.media_type)?W.push({name:t.media_type,params:{itemId:t.item_id,provider:t.provider}}):t.media_type===X.FOLDER?W.push({name:"browse",query:{path:t.path}}):le.emit("playdialog",{items:[t],showContextMenuItems:!0})},h=function(t){t&&t.queue_id in p.players&&(b.selectedPlayerId=t.queue_id,u())};return(t,i)=>{const m=J("swiper-slide");return s(),n("div",null,[d(me,{variant:"panel"},{default:l(()=>[(s(!0),n(P,null,V(e.value,a=>(s(),n("div",{key:a.label},[a.items.length?(s(),n("div",Ae,[d(H,{color:"transparent",style:Q(a.path?"cursor: pointer; width: fit-content;":"width: fit-content;"),onClick:c=>a.path?t.$router.replace(a.path):""},{prepend:l(()=>[d(C,{icon:a.icon},null,8,["icon"])]),title:l(()=>[a.count?(s(),y(j,{key:0,inline:"",color:"grey",content:a.count},{default:l(()=>[_("span",Be,r(t.$t(a.label)),1)]),_:2},1032,["content"])):(s(),n("span",ze,r(t.$t(a.label)),1))]),_:2},1032,["style","onClick"]),d(K,null,{default:l(()=>[(s(!0),n(P,null,V(a.items,c=>(s(),y(m,{key:c.uri},{default:l(()=>[d(se,{item:c,"show-checkboxes":!1,"show-track-number":!1,"is-selected":!1,onClick:v},null,8,["item"])]),_:2},1024))),128))]),_:2},1024)])):a.queues&&a.queues.length?(s(),n("div",Ne,[d(H,{color:"transparent",style:Q(a.path?"cursor: pointer; width: fit-content;":"width: fit-content;"),onClick:c=>a.path?t.$router.replace(a.path):""},{prepend:l(()=>[d(C,{icon:a.icon},null,8,["icon"])]),title:l(()=>[a.count?(s(),y(j,{key:0,inline:"",color:"grey",content:a.count},{default:l(()=>[_("span",Te,r(t.$t(a.label)),1)]),_:2},1032,["content"])):(s(),n("span",ge,r(t.$t(a.label)),1))]),_:2},1032,["style","onClick"]),d(K,null,{default:l(()=>[(s(!0),n(P,null,V(a.queues,c=>(s(),y(m,{key:c.queue_id,style:{"min-width":"300px","max-width":"440px"}},{default:l(()=>[d(Se,{queue:c,onClick:$=>h(c)},null,8,["queue","onClick"])]),_:2},1024))),128))]),_:2},1024)])):D("",!0)]))),128))]),_:1})])}}});export{Ze as default};
