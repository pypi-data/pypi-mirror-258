import{v as M,c as N,L as d,J as b,y as i,z as f,A as r,l as p,B as _,D as L,x as u,K as $,E as o,R as V,N as m,I as q,M as O,ab as F,a2 as C,_ as U,g as W,r as Y,o as H,ak as K,b as j,F as g,G as D,W as x}from"./index-20675090.js";import{_ as J}from"./PanelviewItem.vue_vue_type_style_index_0_lang-4e768a3d.js";import{i as X,e as Z}from"./contextmenu-ec90c658.js";import{_ as w,i as R,V as z}from"./VBadge-778cac01.js";import{L as ee}from"./ListItem-e092a77b.js";import{j as te,k as S,x as ae,y as se,V as le}from"./forwardRefs-67412654.js";import{V as ie}from"./VCard-30020028.js";import{V as Q}from"./VToolbar-7174c765.js";import{V as re,a as T}from"./VSlideGroup-14bb6bf6.js";import"./VTooltip-cf009865.js";import"./VCheckboxBtn-bbfa74a1.js";import"./VMenu-ae4158ef.js";import"./VCardText-5e149cd1.js";const oe={style:{cursor:"pointer"}},ne={key:0},ue={key:0},me={key:1},ce={key:2},de={style:{cursor:"pointer"},class:"line-clamp-1"},pe={key:0},ye={key:1},_e={key:2,class:"line-clamp-1"},ve={key:3,class:"line-clamp-1"},he={key:4,class:"line-clamp-1"},fe={key:5,class:"line-clamp-1"},be={style:{cursor:"pointer"}},ke={style:{cursor:"pointer",fontWeight:"bold"}},Ce=M({__name:"PanelviewPlayerCard",props:{player:{default:void 0},playerQueue:{default:void 0}},setup(k){var s;const y=k,e=N(()=>{if(y.player&&(s=d.queues[y.player.active_source]),s)return s.current_item}),v=N(()=>{if(b.selectedPlayer)return b.selectedPlayer});return(c,P)=>(i(),f(ie,{class:U(["panel-item",{"panel-item-selected":v.value&&c.player&&v.value.player_id==c.player.player_id,"panel-item-idle":u(s)&&u(s).state==u(C).IDLE}])},{default:r(()=>[p(ee,{class:"panel-item-details"},{prepend:r(()=>{var a;return[_("div",{class:"media-thumb player-media-thumb",style:L(`height: ${u($)({breakpoint:"phone"})?50:64}px; width: ${u($)({breakpoint:"phone"})?50:64}px; `)},[p(w,{item:((a=e.value)==null?void 0:a.media_item)||e.value,fallback:u(R),style:{cursor:"pointer"}},null,8,["item","fallback"])],4)]}),title:r(()=>[_("div",oe,[e.value&&e.value.media_item?(i(),o("div",ne,[V(m(e.value.media_item.name)+" ",1),"version"in e.value.media_item&&e.value.media_item.version?(i(),o("span",ue,"("+m(e.value.media_item.version)+")",1)):q("",!0)])):e.value?(i(),o("div",me,m(e.value.name),1)):(i(),o("div",ce,m(c.playerQueue&&c.playerQueue.display_name),1))])]),subtitle:r(()=>{var a,t,l,n,h,A,E,G,B;return[_("div",de,[e.value&&((a=e.value.media_item)==null?void 0:a.media_type)==u(O).TRACK&&"album"in e.value.media_item&&e.value.media_item.album?(i(),o("div",pe,m(u(F)(e.value.media_item.artists))+" â€¢ "+m(e.value.media_item.album.name),1)):e.value&&e.value.media_item&&"artists"in e.value.media_item&&e.value.media_item.artists.length>0?(i(),o("div",ye,m(e.value.media_item.artists[0].name),1)):(l=(t=e.value)==null?void 0:t.streamdetails)!=null&&l.stream_title?(i(),o("div",_e,m((h=(n=e.value)==null?void 0:n.streamdetails)==null?void 0:h.stream_title),1)):e.value&&((A=e.value.media_item)!=null&&A.metadata.description)?(i(),o("div",ve,m(e.value.media_item.metadata.description),1)):c.playerQueue&&c.playerQueue.items==0?(i(),o("div",he,m(c.$t("queue_empty")),1)):((E=u(b).selectedPlayer)==null?void 0:E.active_source)!=((G=u(b).selectedPlayer)==null?void 0:G.player_id)?(i(),o("div",fe,m(c.$t("external_source_active",[(B=u(b).selectedPlayer)==null?void 0:B.active_source])),1)):q("",!0)])]}),default:r(()=>[_("div",be,[_("div",null,[V(" on "),_("span",ke,m(c.player&&c.player.display_name),1)])])]),append:r(()=>[p(te,{icon:"",variant:"text",onClick:P[0]||(P[0]=a=>u(d).queueCommandPlayPause(u(s).queue_id))},{default:r(()=>[u(s).state==u(C).PLAYING?(i(),f(S,{key:0,size:u($)({breakpoint:"phone"})?"24":"32"},{default:r(()=>[V("mdi-pause-circle-outline")]),_:1},8,["size"])):(i(),f(S,{key:1,size:u($)({breakpoint:"phone"})?"24":"32"},{default:r(()=>[V("mdi-play-circle-outline")]),_:1},8,["size"]))]),_:1})]),_:1})]),_:1},8,["class"]))}});const I=W()({name:"VSlideGroupItem",props:ae(),emits:{"group:selected":k=>!0},setup(k,s){let{slots:y}=s;const e=se(k,re);return()=>{var v;return(v=y.default)==null?void 0:v.call(y,{isSelected:e.isSelected.value,select:e.select,toggle:e.toggle,selectedClass:e.selectedClass.value})}}}),Pe={key:0,class:"widget-row"},$e={class:"mr-3"},Ve={key:1,class:"mr-3"},Se={key:1,class:"widget-row"},ge={class:"mr-3"},De={key:1,class:"mr-3"},Oe=M({__name:"HomeView",setup(k){const s=Y({queue:{label:"currently_playing",icon:"mdi-playlist-play",items:[]},recently_played:{label:"recently_played",icon:"mdi-motion-play",items:[]},artists:{label:"artists",icon:"mdi-account-music",path:"/artists",items:[]},albums:{label:"albums",icon:"mdi-album",path:"/albums",items:[]},playlists:{label:"playlists",icon:"mdi-playlist-music",path:"/playlists",items:[]},tracks:{label:"tracks",icon:"mdi-file-music",path:"/tracks",items:[]},radios:{label:"radios",icon:"mdi-radio",path:"/radios",items:[]},browse:{label:"browse",icon:"mdi-folder",path:"/browse",items:[]}});H(async()=>{const a=d.subscribe(K.PLAYER_UPDATED,t=>{e()});j(a),e(),d.getRecentlyPlayedItems(20).then(t=>{s.value.recently_played.items=t}),d.getLibraryArtists(void 0,void 0,20,void 0,"RANDOM()").then(t=>{s.value.artists.items=t.items,s.value.artists.count=t.total}),d.getLibraryAlbums(void 0,void 0,20,void 0,"timestamp_added DESC").then(t=>{s.value.albums.items=t.items,s.value.albums.count=t.total}),d.getLibraryPlaylists(void 0,void 0,20,void 0,"timestamp_added DESC").then(t=>{s.value.playlists.items=t.items,s.value.playlists.count=t.total}),d.getLibraryRadios(void 0,void 0,20,void 0,"timestamp_added DESC").then(t=>{s.value.radios.items=t.items,s.value.radios.count=t.total}),d.getLibraryTracks(void 0,void 0,20,void 0,"timestamp_added DESC").then(t=>{s.value.tracks.items=t.items,s.value.tracks.count=t.total}),await d.browse("",t=>{s.value.browse.items.push(...t)})});const y={[C.PLAYING]:1,[C.PAUSED]:2,[C.IDLE]:2},e=function(){d.getPlayers().then(a=>{for(var t of a){var l=d.queues[t.player_id];l&&l.items>0&&t.powered&&v(t)&&(s.value.queue.players||(s.value.queue.players=[]),s.value.queue.players.some(n=>n.player_id===t.player_id)||(s.value.queue.players.push(t),s.value.queue.players.sort((n,h)=>n.display_name.localeCompare(h.display_name)),s.value.queue.players.sort((n,h)=>y[n.state]-y[h.state])))}})},v=function(a){return a.active_source===a.player_id},c=function(a){X(a)&&["artist","album","playlist"].includes(a.media_type)?x.push({name:a.media_type,params:{itemId:a.item_id,provider:a.provider}}):a.media_type===O.FOLDER?x.push({name:"browse",query:{path:a.path}}):Z.emit("playdialog",{items:[a],showContextMenuItems:!0})},P=function(a){const t=a;t&&(b.selectedPlayer=t,e())};return(a,t)=>(i(),o("div",null,[(i(!0),o(g,null,D(s.value,l=>(i(),o("div",{key:l.label},[p(le),l.items.length?(i(),o("div",Pe,[p(Q,{color:"transparent",style:L(l.path?"cursor: pointer":""),onClick:n=>l.path?a.$router.replace(l.path):""},{prepend:r(()=>[p(S,{icon:l.icon,style:{"margin-left":"15px"}},null,8,["icon"])]),title:r(()=>[l.count?(i(),f(z,{key:0,inline:"",color:"grey",content:l.count},{default:r(()=>[_("span",$e,m(a.$t(l.label)),1)]),_:2},1032,["content"])):(i(),o("span",Ve,m(a.$t(l.label)),1))]),_:2},1032,["style","onClick"]),p(T,{"show-arrows":""},{default:r(()=>[(i(!0),o(g,null,D(l.items,n=>(i(),f(I,{key:n.uri},{default:r(()=>[p(J,{item:n,"show-checkboxes":!1,"show-track-number":!1,"is-selected":!1,style:{height:"160px",width:"120px",margin:"5px"},onClick:c},null,8,["item"])]),_:2},1024))),128))]),_:2},1024)])):l.players&&l.players.length?(i(),o("div",Se,[p(Q,{color:"transparent",style:L(l.path?"cursor: pointer":""),onClick:n=>l.path?a.$router.replace(l.path):""},{prepend:r(()=>[p(S,{icon:l.icon,style:{"margin-left":"15px"}},null,8,["icon"])]),title:r(()=>[l.count?(i(),f(z,{key:0,inline:"",color:"grey",content:l.count},{default:r(()=>[_("span",ge,m(a.$t(l.label)),1)]),_:2},1032,["content"])):(i(),o("span",De,m(a.$t(l.label)),1))]),_:2},1032,["style","onClick"]),p(T,{"show-arrows":""},{default:r(()=>[(i(!0),o(g,null,D(l.players,n=>(i(),f(I,{key:n.player_id},{default:r(()=>[p(Ce,{player:n,style:{height:"auto",width:"auto","max-width":"400px",margin:"5px"},onClick:h=>P(n)},null,8,["player","onClick"])]),_:2},1024))),128))]),_:2},1024)])):q("",!0)]))),128))]))}});export{Oe as default};
